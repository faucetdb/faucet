(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerPolicy&&(n.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?n.credentials="include":c.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(c){if(c.ep)return;c.ep=!0;const n=s(c);fetch(c.href,n)}})();var ce,z,Xe,Y,Ee,Je,Ze,et,Ae,ye,_e,tt,ae={},rt=[],_t=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ie=Array.isArray;function U(t,r){for(var s in r)t[s]=r[s];return t}function Me(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function $e(t,r,s){var a,c,n,l={};for(n in r)n=="key"?a=r[n]:n=="ref"?c=r[n]:l[n]=r[n];if(arguments.length>2&&(l.children=arguments.length>3?ce.call(arguments,2):s),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)l[n]===void 0&&(l[n]=t.defaultProps[n]);return se(t,l,a,c,null)}function se(t,r,s,a,c){var n={type:t,props:r,key:s,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:c??++Xe,__i:-1,__u:0};return c==null&&z.vnode!=null&&z.vnode(n),n}function oe(t){return t.children}function ne(t,r){this.props=t,this.context=r}function Z(t,r){if(r==null)return t.__?Z(t.__,t.__i+1):null;for(var s;r<t.__k.length;r++)if((s=t.__k[r])!=null&&s.__e!=null)return s.__e;return typeof t.type=="function"?Z(t):null}function st(t){var r,s;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if((s=t.__k[r])!=null&&s.__e!=null){t.__e=t.__c.base=s.__e;break}return st(t)}}function we(t){(!t.__d&&(t.__d=!0)&&Y.push(t)&&!me.__r++||Ee!=z.debounceRendering)&&((Ee=z.debounceRendering)||Je)(me)}function me(){for(var t,r,s,a,c,n,l,d=1;Y.length;)Y.length>d&&Y.sort(Ze),t=Y.shift(),d=Y.length,t.__d&&(s=void 0,a=void 0,c=(a=(r=t).__v).__e,n=[],l=[],r.__P&&((s=U({},a)).__v=a.__v+1,z.vnode&&z.vnode(s),Te(r.__P,s,a,r.__n,r.__P.namespaceURI,32&a.__u?[c]:null,n,c??Z(a),!!(32&a.__u),l),s.__v=a.__v,s.__.__k[s.__i]=s,lt(n,s,l),a.__e=a.__=null,s.__e!=c&&st(s)));me.__r=0}function nt(t,r,s,a,c,n,l,d,h,u,p){var i,f,v,_,$,C,S,m=a&&a.__k||rt,w=r.length;for(h=wt(s,r,m,h,w),i=0;i<w;i++)(v=s.__k[i])!=null&&(f=v.__i==-1?ae:m[v.__i]||ae,v.__i=i,C=Te(t,v,f,c,n,l,d,h,u,p),_=v.__e,v.ref&&f.ref!=v.ref&&(f.ref&&Ie(f.ref,null,v),p.push(v.ref,v.__c||_,v)),$==null&&_!=null&&($=_),(S=!!(4&v.__u))||f.__k===v.__k?h=at(v,h,t,S):typeof v.type=="function"&&C!==void 0?h=C:_&&(h=_.nextSibling),v.__u&=-7);return s.__e=$,h}function wt(t,r,s,a,c){var n,l,d,h,u,p=s.length,i=p,f=0;for(t.__k=new Array(c),n=0;n<c;n++)(l=r[n])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=t.__k[n]=se(null,l,null,null,null):ie(l)?l=t.__k[n]=se(oe,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=t.__k[n]=se(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):t.__k[n]=l,h=n+f,l.__=t,l.__b=t.__b+1,d=null,(u=l.__i=kt(l,s,h,i))!=-1&&(i--,(d=s[u])&&(d.__u|=2)),d==null||d.__v==null?(u==-1&&(c>p?f--:c<p&&f++),typeof l.type!="function"&&(l.__u|=4)):u!=h&&(u==h-1?f--:u==h+1?f++:(u>h?f--:f++,l.__u|=4))):t.__k[n]=null;if(i)for(n=0;n<p;n++)(d=s[n])!=null&&(2&d.__u)==0&&(d.__e==a&&(a=Z(d)),it(d,d));return a}function at(t,r,s,a){var c,n;if(typeof t.type=="function"){for(c=t.__k,n=0;c&&n<c.length;n++)c[n]&&(c[n].__=t,r=at(c[n],r,s,a));return r}t.__e!=r&&(a&&(r&&t.type&&!r.parentNode&&(r=Z(t)),s.insertBefore(t.__e,r||null)),r=t.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType==8);return r}function ke(t,r){return r=r||[],t==null||typeof t=="boolean"||(ie(t)?t.some(function(s){ke(s,r)}):r.push(t)),r}function kt(t,r,s,a){var c,n,l,d=t.key,h=t.type,u=r[s],p=u!=null&&(2&u.__u)==0;if(u===null&&d==null||p&&d==u.key&&h==u.type)return s;if(a>(p?1:0)){for(c=s-1,n=s+1;c>=0||n<r.length;)if((u=r[l=c>=0?c--:n++])!=null&&(2&u.__u)==0&&d==u.key&&h==u.type)return l}return-1}function He(t,r,s){r[0]=="-"?t.setProperty(r,s??""):t[r]=s==null?"":typeof s!="number"||_t.test(r)?s:s+"px"}function de(t,r,s,a,c){var n,l;e:if(r=="style")if(typeof s=="string")t.style.cssText=s;else{if(typeof a=="string"&&(t.style.cssText=a=""),a)for(r in a)s&&r in s||He(t.style,r,"");if(s)for(r in s)a&&s[r]==a[r]||He(t.style,r,s[r])}else if(r[0]=="o"&&r[1]=="n")n=r!=(r=r.replace(et,"$1")),l=r.toLowerCase(),r=l in t||r=="onFocusOut"||r=="onFocusIn"?l.slice(2):r.slice(2),t.l||(t.l={}),t.l[r+n]=s,s?a?s.u=a.u:(s.u=Ae,t.addEventListener(r,n?_e:ye,n)):t.removeEventListener(r,n?_e:ye,n);else{if(c=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in t)try{t[r]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&r[4]!="-"?t.removeAttribute(r):t.setAttribute(r,r=="popover"&&s==1?"":s))}}function De(t){return function(r){if(this.l){var s=this.l[r.type+t];if(r.t==null)r.t=Ae++;else if(r.t<s.u)return;return s(z.event?z.event(r):r)}}}function Te(t,r,s,a,c,n,l,d,h,u){var p,i,f,v,_,$,C,S,m,w,P,H,g,o,k,I,y,M=r.type;if(r.constructor!==void 0)return null;128&s.__u&&(h=!!(32&s.__u),n=[d=r.__e=s.__e]),(p=z.__b)&&p(r);e:if(typeof M=="function")try{if(S=r.props,m="prototype"in M&&M.prototype.render,w=(p=M.contextType)&&a[p.__c],P=p?w?w.props.value:p.__:a,s.__c?C=(i=r.__c=s.__c).__=i.__E:(m?r.__c=i=new M(S,P):(r.__c=i=new ne(S,P),i.constructor=M,i.render=St),w&&w.sub(i),i.state||(i.state={}),i.__n=a,f=i.__d=!0,i.__h=[],i._sb=[]),m&&i.__s==null&&(i.__s=i.state),m&&M.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=U({},i.__s)),U(i.__s,M.getDerivedStateFromProps(S,i.__s))),v=i.props,_=i.state,i.__v=r,f)m&&M.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),m&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(m&&M.getDerivedStateFromProps==null&&S!==v&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(S,P),r.__v==s.__v||!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(S,i.__s,P)===!1){for(r.__v!=s.__v&&(i.props=S,i.state=i.__s,i.__d=!1),r.__e=s.__e,r.__k=s.__k,r.__k.some(function(D){D&&(D.__=r)}),H=0;H<i._sb.length;H++)i.__h.push(i._sb[H]);i._sb=[],i.__h.length&&l.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(S,i.__s,P),m&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(v,_,$)})}if(i.context=P,i.props=S,i.__P=t,i.__e=!1,g=z.__r,o=0,m){for(i.state=i.__s,i.__d=!1,g&&g(r),p=i.render(i.props,i.state,i.context),k=0;k<i._sb.length;k++)i.__h.push(i._sb[k]);i._sb=[]}else do i.__d=!1,g&&g(r),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++o<25);i.state=i.__s,i.getChildContext!=null&&(a=U(U({},a),i.getChildContext())),m&&!f&&i.getSnapshotBeforeUpdate!=null&&($=i.getSnapshotBeforeUpdate(v,_)),I=p,p!=null&&p.type===oe&&p.key==null&&(I=ct(p.props.children)),d=nt(t,ie(I)?I:[I],r,s,a,c,n,l,d,h,u),i.base=r.__e,r.__u&=-161,i.__h.length&&l.push(i),C&&(i.__E=i.__=null)}catch(D){if(r.__v=null,h||n!=null)if(D.then){for(r.__u|=h?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;n[n.indexOf(d)]=null,r.__e=d}else{for(y=n.length;y--;)Me(n[y]);Ce(r)}else r.__e=s.__e,r.__k=s.__k,D.then||Ce(r);z.__e(D,r,s)}else n==null&&r.__v==s.__v?(r.__k=s.__k,r.__e=s.__e):d=r.__e=Ct(s.__e,r,s,a,c,n,l,h,u);return(p=z.diffed)&&p(r),128&r.__u?void 0:d}function Ce(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Ce)}function lt(t,r,s){for(var a=0;a<s.length;a++)Ie(s[a],s[++a],s[++a]);z.__c&&z.__c(r,t),t.some(function(c){try{t=c.__h,c.__h=[],t.some(function(n){n.call(c)})}catch(n){z.__e(n,c.__v)}})}function ct(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ie(t)?t.map(ct):U({},t)}function Ct(t,r,s,a,c,n,l,d,h){var u,p,i,f,v,_,$,C=s.props||ae,S=r.props,m=r.type;if(m=="svg"?c="http://www.w3.org/2000/svg":m=="math"?c="http://www.w3.org/1998/Math/MathML":c||(c="http://www.w3.org/1999/xhtml"),n!=null){for(u=0;u<n.length;u++)if((v=n[u])&&"setAttribute"in v==!!m&&(m?v.localName==m:v.nodeType==3)){t=v,n[u]=null;break}}if(t==null){if(m==null)return document.createTextNode(S);t=document.createElementNS(c,m,S.is&&S),d&&(z.__m&&z.__m(r,n),d=!1),n=null}if(m==null)C===S||d&&t.data==S||(t.data=S);else{if(n=n&&ce.call(t.childNodes),!d&&n!=null)for(C={},u=0;u<t.attributes.length;u++)C[(v=t.attributes[u]).name]=v.value;for(u in C)if(v=C[u],u!="children"){if(u=="dangerouslySetInnerHTML")i=v;else if(!(u in S)){if(u=="value"&&"defaultValue"in S||u=="checked"&&"defaultChecked"in S)continue;de(t,u,null,v,c)}}for(u in S)v=S[u],u=="children"?f=v:u=="dangerouslySetInnerHTML"?p=v:u=="value"?_=v:u=="checked"?$=v:d&&typeof v!="function"||C[u]===v||de(t,u,v,C[u],c);if(p)d||i&&(p.__html==i.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),r.__k=[];else if(i&&(t.innerHTML=""),nt(r.type=="template"?t.content:t,ie(f)?f:[f],r,s,a,m=="foreignObject"?"http://www.w3.org/1999/xhtml":c,n,l,n?n[0]:s.__k&&Z(s,0),d,h),n!=null)for(u=n.length;u--;)Me(n[u]);d||(u="value",m=="progress"&&_==null?t.removeAttribute("value"):_!=null&&(_!==t[u]||m=="progress"&&!_||m=="option"&&_!=C[u])&&de(t,u,_,C[u],c),u="checked",$!=null&&$!=t[u]&&de(t,u,$,C[u],c))}return t}function Ie(t,r,s){try{if(typeof t=="function"){var a=typeof t.__u=="function";a&&t.__u(),a&&r==null||(t.__u=t(r))}else t.current=r}catch(c){z.__e(c,s)}}function it(t,r,s){var a,c;if(z.unmount&&z.unmount(t),(a=t.ref)&&(a.current&&a.current!=t.__e||Ie(a,null,r)),(a=t.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(n){z.__e(n,r)}a.base=a.__P=null}if(a=t.__k)for(c=0;c<a.length;c++)a[c]&&it(a[c],r,s||typeof t.type!="function");s||Me(t.__e),t.__c=t.__=t.__e=void 0}function St(t,r,s){return this.constructor(t,s)}function Pt(t,r,s){var a,c,n,l;r==document&&(r=document.documentElement),z.__&&z.__(t,r),c=(a=!1)?null:r.__k,n=[],l=[],Te(r,t=r.__k=$e(oe,null,[t]),c||ae,ae,r.namespaceURI,c?null:r.firstChild?ce.call(r.childNodes):null,n,c?c.__e:r.firstChild,a,l),lt(n,t,l)}function At(t,r,s){var a,c,n,l,d=U({},t.props);for(n in t.type&&t.type.defaultProps&&(l=t.type.defaultProps),r)n=="key"?a=r[n]:n=="ref"?c=r[n]:d[n]=r[n]===void 0&&l!=null?l[n]:r[n];return arguments.length>2&&(d.children=arguments.length>3?ce.call(arguments,2):s),se(t.type,d,a||t.key,c||t.ref,null)}function Mt(t){function r(s){var a,c;return this.getChildContext||(a=new Set,(c={})[r.__c]=this,this.getChildContext=function(){return c},this.componentWillUnmount=function(){a=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&a.forEach(function(l){l.__e=!0,we(l)})},this.sub=function(n){a.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){a&&a.delete(n),l&&l.call(n)}}),s.children}return r.__c="__cC"+tt++,r.__=t,r.Provider=r.__l=(r.Consumer=function(s,a){return s.children(a)}).contextType=r,r}ce=rt.slice,z={__e:function(t,r,s,a){for(var c,n,l;r=r.__;)if((c=r.__c)&&!c.__)try{if((n=c.constructor)&&n.getDerivedStateFromError!=null&&(c.setState(n.getDerivedStateFromError(t)),l=c.__d),c.componentDidCatch!=null&&(c.componentDidCatch(t,a||{}),l=c.__d),l)return c.__E=c}catch(d){t=d}throw t}},Xe=0,ne.prototype.setState=function(t,r){var s;s=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof t=="function"&&(t=t(U({},s),this.props)),t&&U(s,t),t!=null&&this.__v&&(r&&this._sb.push(r),we(this))},ne.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),we(this))},ne.prototype.render=oe,Y=[],Je=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ze=function(t,r){return t.__v.__b-r.__v.__b},me.__r=0,et=/(PointerCapture)$|Capture$/i,Ae=0,ye=De(!1),_e=De(!0),tt=0;var $t=0;function e(t,r,s,a,c,n){r||(r={});var l,d,h=r;if("ref"in h)for(d in h={},r)d=="ref"?l=r[d]:h[d]=r[d];var u={type:t,props:h,key:s,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$t,__i:-1,__u:0,__source:c,__self:n};if(typeof t=="function"&&(l=t.defaultProps))for(d in l)h[d]===void 0&&(h[d]=l[d]);return z.vnode&&z.vnode(u),u}var le,L,ge,Re,xe=0,ot=[],E=z,je=E.__b,Be=E.__r,Fe=E.diffed,Oe=E.__c,Ue=E.unmount,Ke=E.__;function ze(t,r){E.__h&&E.__h(L,t,xe||r),xe=0;var s=L.__H||(L.__H={__:[],__h:[]});return t>=s.__.length&&s.__.push({}),s.__[t]}function b(t){return xe=1,Tt(ut,t)}function Tt(t,r,s){var a=ze(le++,2);if(a.t=t,!a.__c&&(a.__=[ut(void 0,r),function(d){var h=a.__N?a.__N[0]:a.__[0],u=a.t(h,d);h!==u&&(a.__N=[u,a.__[1]],a.__c.setState({}))}],a.__c=L,!L.__f)){var c=function(d,h,u){if(!a.__c.__H)return!0;var p=a.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!n||n.call(this,d,h,u);var i=a.__c.props!==d;return p.forEach(function(f){if(f.__N){var v=f.__[0];f.__=f.__N,f.__N=void 0,v!==f.__[0]&&(i=!0)}}),n&&n.call(this,d,h,u)||i};L.__f=!0;var n=L.shouldComponentUpdate,l=L.componentWillUpdate;L.componentWillUpdate=function(d,h,u){if(this.__e){var p=n;n=void 0,c(d,h,u),n=p}l&&l.call(this,d,h,u)},L.shouldComponentUpdate=c}return a.__N||a.__}function B(t,r){var s=ze(le++,3);!E.__s&&dt(s.__H,r)&&(s.__=t,s.u=r,L.__H.__h.push(s))}function It(t){return xe=5,zt(function(){return{current:t}},[])}function zt(t,r){var s=ze(le++,7);return dt(s.__H,r)&&(s.__=t(),s.__H=r,s.__h=t),s.__}function Lt(){for(var t;t=ot.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(pe),t.__H.__h.forEach(Se),t.__H.__h=[]}catch(r){t.__H.__h=[],E.__e(r,t.__v)}}E.__b=function(t){L=null,je&&je(t)},E.__=function(t,r){t&&r.__k&&r.__k.__m&&(t.__m=r.__k.__m),Ke&&Ke(t,r)},E.__r=function(t){Be&&Be(t),le=0;var r=(L=t.__c).__H;r&&(ge===L?(r.__h=[],L.__h=[],r.__.forEach(function(s){s.__N&&(s.__=s.__N),s.u=s.__N=void 0})):(r.__h.forEach(pe),r.__h.forEach(Se),r.__h=[],le=0)),ge=L},E.diffed=function(t){Fe&&Fe(t);var r=t.__c;r&&r.__H&&(r.__H.__h.length&&(ot.push(r)!==1&&Re===E.requestAnimationFrame||((Re=E.requestAnimationFrame)||Et)(Lt)),r.__H.__.forEach(function(s){s.u&&(s.__H=s.u),s.u=void 0})),ge=L=null},E.__c=function(t,r){r.some(function(s){try{s.__h.forEach(pe),s.__h=s.__h.filter(function(a){return!a.__||Se(a)})}catch(a){r.some(function(c){c.__h&&(c.__h=[])}),r=[],E.__e(a,s.__v)}}),Oe&&Oe(t,r)},E.unmount=function(t){Ue&&Ue(t);var r,s=t.__c;s&&s.__H&&(s.__H.__.forEach(function(a){try{pe(a)}catch(c){r=c}}),s.__H=void 0,r&&E.__e(r,s.__v))};var Ne=typeof requestAnimationFrame=="function";function Et(t){var r,s=function(){clearTimeout(a),Ne&&cancelAnimationFrame(r),setTimeout(t)},a=setTimeout(s,35);Ne&&(r=requestAnimationFrame(s))}function pe(t){var r=L,s=t.__c;typeof s=="function"&&(t.__c=void 0,s()),L=r}function Se(t){var r=L;t.__c=t.__(),L=r}function dt(t,r){return!t||t.length!==r.length||r.some(function(s,a){return s!==t[a]})}function ut(t,r){return typeof r=="function"?r(t):r}var Ht={};function ue(t,r){for(var s in r)t[s]=r[s];return t}function Dt(t,r,s){var a,c=/(?:\?([^#]*))?(#.*)?$/,n=t.match(c),l={};if(n&&n[1])for(var d=n[1].split("&"),h=0;h<d.length;h++){var u=d[h].split("=");l[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}t=Pe(t.replace(c,"")),r=Pe(r||"");for(var p=Math.max(t.length,r.length),i=0;i<p;i++)if(r[i]&&r[i].charAt(0)===":"){var f=r[i].replace(/(^:|[+*?]+$)/g,""),v=(r[i].match(/[+*?]+$/)||Ht)[0]||"",_=~v.indexOf("+"),$=~v.indexOf("*"),C=t[i]||"";if(!C&&!$&&(v.indexOf("?")<0||_)){a=!1;break}if(l[f]=decodeURIComponent(C),_||$){l[f]=t.slice(i).map(decodeURIComponent).join("/");break}}else if(r[i]!==t[i]){a=!1;break}return(s.default===!0||a!==!1)&&l}function Rt(t,r){return t.rank<r.rank?1:t.rank>r.rank?-1:t.index-r.index}function jt(t,r){return t.index=r,t.rank=(function(s){return s.props.default?0:Pe(s.props.path).map(Bt).join("")})(t),t.props}function Pe(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Bt(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var Ft={},G=[],Ve=[],j=null,ht={url:Le()},Ot=Mt(ht);function Le(){var t;return""+((t=j&&j.location?j.location:j&&j.getCurrentLocation?j.getCurrentLocation():typeof location<"u"?location:Ft).pathname||"")+(t.search||"")}function J(t,r){return r===void 0&&(r=!1),typeof t!="string"&&t.url&&(r=t.replace,t=t.url),(function(s){for(var a=G.length;a--;)if(G[a].canRoute(s))return!0;return!1})(t)&&(function(s,a){a===void 0&&(a="push"),j&&j[a]?j[a](s):typeof history<"u"&&history[a+"State"]&&history[a+"State"](null,null,s)})(t,r?"replace":"push"),pt(t)}function pt(t){for(var r=!1,s=0;s<G.length;s++)G[s].routeTo(t)&&(r=!0);return r}function Ut(t){if(t&&t.getAttribute){var r=t.getAttribute("href"),s=t.getAttribute("target");if(r&&r.match(/^\//g)&&(!s||s.match(/^_?self$/i)))return J(r)}}function Kt(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function Nt(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var r=t.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(Ut(r))return Kt(t)}while(r=r.parentNode)}}var qe=!1;function mt(t){t.history&&(j=t.history),this.state={url:t.url||Le()}}ue(mt.prototype=new ne,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var r=ke(this.props.children);return this.g(r,t)!==void 0},routeTo:function(t){this.setState({url:t});var r=this.canRoute(t);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;qe||(qe=!0,j||addEventListener("popstate",function(){pt(Le())}),addEventListener("click",Nt)),G.push(this),j&&(this.u=j.listen(function(r){var s=r.location||r;t.routeTo(""+(s.pathname||"")+(s.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),G.splice(G.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,r){t=t.filter(jt).sort(Rt);for(var s=0;s<t.length;s++){var a=t[s],c=Dt(r,a.props.path,a.props);if(c)return[a,c]}},render:function(t,r){var s,a,c=t.onChange,n=r.url,l=this.c,d=this.g(ke(t.children),n);if(d&&(a=At(d[0],ue(ue({url:n,matches:s=d[1]},s),{key:void 0,ref:void 0}))),n!==(l&&l.url)){ue(ht,l=this.c={url:n,previous:l&&l.url,current:a,path:a?a.props.path:null,matches:s}),l.router=this,l.active=a?[a]:[];for(var h=Ve.length;h--;)Ve[h]({});typeof c=="function"&&c(l)}return $e(Ot.Provider,{value:l},a)}});var N=function(t){return $e(t.component,t)};const Vt=[{path:"/",label:"Dashboard",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})},{path:"/services",label:"Services",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})},{path:"/schema",label:"Schema",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})})},{path:"/api-explorer",label:"API Explorer",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})})},{path:"/roles",label:"Roles",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})},{path:"/api-keys",label:"API Keys",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z","clip-rule":"evenodd"})})},{path:"/mcp",label:"MCP Server",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:[e("path",{d:"M13 7H7v6h6V7z"}),e("path",{"fill-rule":"evenodd",d:"M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z","clip-rule":"evenodd"})]})},{path:"/settings",label:"Settings",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})})}];function qt({currentPath:t,isOpen:r,onClose:s}){return e("aside",{class:`
        fixed lg:static inset-y-0 left-0 z-40
        w-64 bg-surface-raised border-r border-border-subtle
        flex flex-col
        transition-transform duration-200 ease-out
        ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[e("div",{class:"flex items-center gap-3 px-5 h-16 border-b border-border-subtle shrink-0",children:[e("img",{src:"/faucet-icon.svg",alt:"Faucet",width:"28",height:"28",class:"shrink-0"}),e("div",{children:[e("span",{class:"text-base font-semibold text-text-primary tracking-tight",children:"Faucet"}),e("span",{class:"text-xs text-text-muted ml-2",children:"Admin"})]})]}),e("nav",{class:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:Vt.map(a=>{const c=t===a.path||a.path!=="/"&&t.startsWith(a.path);return e("a",{href:a.path,onClick:n=>{},class:`
                flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium
                transition-colors duration-150 group
                ${c?"bg-brand/10 text-brand":"text-text-secondary hover:text-text-primary hover:bg-surface-overlay"}
              `,children:[e(a.icon,{class:`w-5 h-5 shrink-0 ${c?"text-brand":"text-text-muted group-hover:text-text-secondary"}`}),a.label,c&&e("div",{class:"ml-auto w-1.5 h-1.5 rounded-full bg-brand"})]},a.path)})}),e("div",{class:"px-5 py-4 border-t border-border-subtle",children:e("div",{class:"flex items-center gap-2 text-xs text-text-muted",children:[e("div",{class:"w-2 h-2 rounded-full bg-success animate-pulse"}),e("span",{children:"Faucet v0.1.0"})]})})]})}function Wt({onMenuClick:t,onLogout:r}){return e("header",{class:"h-16 border-b border-border-subtle bg-surface-raised/80 backdrop-blur-sm flex items-center justify-between px-4 lg:px-6 shrink-0 z-20",children:[e("div",{class:"flex items-center gap-3",children:[e("button",{onClick:t,class:"lg:hidden p-2 rounded-lg text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors","aria-label":"Toggle menu",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})})}),e("div",{class:"hidden sm:flex items-center gap-2 text-sm text-text-muted",children:[e("kbd",{class:"px-2 py-0.5 rounded bg-surface-overlay border border-border-default text-xs font-mono",children:"/"}),e("span",{children:"Quick search..."})]})]}),e("div",{class:"flex items-center gap-3",children:[e("a",{href:"/healthz",target:"_blank",class:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors",children:[e("div",{class:"w-2 h-2 rounded-full bg-success"}),e("span",{class:"hidden sm:inline",children:"Healthy"})]}),e("a",{href:"/openapi.json",target:"_blank",class:"p-2 rounded-lg text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors",title:"OpenAPI Spec",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z","clip-rule":"evenodd"})})}),r&&e("button",{onClick:r,class:"p-2 rounded-lg text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors",title:"Sign out",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})})}),e("div",{class:"w-8 h-8 rounded-full bg-gradient-to-br from-brand to-cyan-accent flex items-center justify-center text-xs font-bold text-white",children:"A"})]})]})}const We={healthy:{color:"text-success",bg:"bg-success/10",dot:"bg-success"},active:{color:"text-success",bg:"bg-success/10",dot:"bg-success"},degraded:{color:"text-warning",bg:"bg-warning/10",dot:"bg-warning"},error:{color:"text-error",bg:"bg-error/10",dot:"bg-error"},inactive:{color:"text-text-muted",bg:"bg-surface-overlay",dot:"bg-text-muted"},unknown:{color:"text-text-muted",bg:"bg-surface-overlay",dot:"bg-text-muted"}};function be({status:t,label:r}){const s=We[t]||We.unknown,a=r||t.charAt(0).toUpperCase()+t.slice(1);return e("span",{class:`badge ${s.bg} ${s.color}`,children:[e("span",{class:`w-1.5 h-1.5 rounded-full ${s.dot} mr-1.5`}),a]})}const Qt="";function Yt(){const t={"Content-Type":"application/json"},r=localStorage.getItem("faucet_api_key");r&&(t["X-API-Key"]=r);const s=localStorage.getItem("faucet_session");return s&&(t.Authorization=`Bearer ${s}`),t}async function T(t,r={}){const{method:s="GET",body:a,headers:c={}}=r,n=await fetch(`${Qt}${t}`,{method:s,headers:{...Yt(),...c},body:a?JSON.stringify(a):void 0});if(!n.ok){let l=`HTTP ${n.status}`;try{const d=await n.json();d.error?.message&&(l=d.error.message)}catch{l=`${n.status} ${n.statusText}`}throw new Error(l)}if(n.status!==204)return n.json()}function Gt(){const[t,r]=b([]),[s,a]=b(0),[c,n]=b(0),[l,d]=b(!0);B(()=>{h()},[]);async function h(){d(!0);try{const[p,i,f]=await Promise.allSettled([T("/api/v1/system/service"),T("/api/v1/system/api-key"),T("/api/v1/system/role")]);p.status==="fulfilled"&&r(p.value.resource||[]),i.status==="fulfilled"&&a((i.value.resource||[]).length),f.status==="fulfilled"&&n((f.value.resource||[]).length)}catch{}finally{d(!1)}}function u({label:p,value:i,icon:f,accent:v}){return e("div",{class:"card group hover:border-border-default transition-colors duration-200",children:e("div",{class:"flex items-start justify-between",children:[e("div",{children:[e("p",{class:"text-sm text-text-secondary mb-1",children:p}),e("p",{class:`text-2xl font-semibold font-mono ${v||"text-text-primary"}`,children:i})]}),e("div",{class:"p-2 rounded-lg bg-surface-overlay text-text-muted group-hover:text-brand transition-colors",children:f})]})})}return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Dashboard"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Overview of your Faucet instance"})]}),e("div",{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e(u,{label:"Connected Databases",value:t.length,accent:"text-brand",icon:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})}),e(u,{label:"API Keys",value:s,icon:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z","clip-rule":"evenodd"})})}),e(u,{label:"Roles",value:c,icon:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e("div",{class:"lg:col-span-2 card",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Connected Databases"}),e("a",{href:"/services",class:"text-xs text-brand hover:text-brand-light transition-colors",children:"View all →"})]}),l?e("div",{class:"space-y-3",children:[1,2,3].map(p=>e("div",{class:"h-14 bg-surface-overlay rounded-lg animate-pulse"},p))}):t.length===0?e("div",{class:"text-center py-8",children:[e("div",{class:"text-text-muted mb-3",children:e("svg",{class:"w-10 h-10 mx-auto",viewBox:"0 0 20 20",fill:"currentColor",opacity:"0.3",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})}),e("p",{class:"text-sm text-text-muted mb-3",children:"No services connected yet"}),e("a",{href:"/services",class:"btn-primary text-sm inline-block",children:"Add Service"})]}):e("div",{class:"space-y-2",children:t.map(p=>e("div",{class:"flex items-center justify-between p-3 rounded-lg bg-surface hover:bg-surface-overlay transition-colors",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-8 h-8 rounded-lg bg-brand/10 flex items-center justify-center",children:e("span",{class:"text-xs font-bold text-brand uppercase",children:p.driver.slice(0,2)})}),e("div",{children:[e("p",{class:"text-sm font-medium text-text-primary",children:p.name}),e("p",{class:"text-xs text-text-muted",children:p.driver})]})]}),e(be,{status:p.active?"active":"inactive"})]},p.name))})]}),e("div",{class:"card",children:[e("h2",{class:"text-base font-semibold text-text-primary mb-4",children:"Quick Actions"}),e("div",{class:"space-y-2",children:[{label:"Add Database",href:"/services",icon:"+"},{label:"Explore Schema",href:"/schema",icon:"#"},{label:"Test API",href:"/api-explorer",icon:">"},{label:"Create API Key",href:"/api-keys",icon:"*"},{label:"Manage Roles",href:"/roles",icon:"@"}].map(p=>e("a",{href:p.href,class:"flex items-center gap-3 p-3 rounded-lg hover:bg-surface-overlay text-text-secondary hover:text-text-primary transition-colors group",children:[e("span",{class:"w-8 h-8 rounded-lg bg-surface-overlay flex items-center justify-center font-mono text-sm text-text-muted group-hover:text-brand group-hover:bg-brand/10 transition-colors",children:p.icon}),e("span",{class:"text-sm font-medium",children:p.label}),e("svg",{class:"w-4 h-4 ml-auto text-text-muted group-hover:text-text-secondary transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})})]},p.label))})]})]})]})}function fe({isOpen:t,onClose:r,title:s,children:a,width:c="max-w-lg"}){const n=It(null);return B(()=>{const l=d=>{d.key==="Escape"&&r()};return t&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow=""}},[t,r]),t?e("div",{ref:n,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:l=>{l.target===n.current&&r()},children:e("div",{class:`${c} w-full bg-surface-raised border border-border-subtle rounded-xl shadow-2xl animate-scale-in`,children:[e("div",{class:"flex items-center justify-between px-6 py-4 border-b border-border-subtle",children:[e("h2",{class:"text-lg font-semibold text-text-primary",children:s}),e("button",{onClick:r,class:"p-1.5 rounded-lg text-text-muted hover:text-text-primary hover:bg-surface-overlay transition-colors",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})})]}),e("div",{class:"px-6 py-4 max-h-[70vh] overflow-y-auto",children:a})]})}):null}const Xt=[{value:"postgres",label:"PostgreSQL"},{value:"mysql",label:"MySQL"},{value:"mssql",label:"SQL Server"},{value:"snowflake",label:"Snowflake"}],Qe={name:"",driver:"postgres",dsn:"",schema:""};function Jt(){const[t,r]=b([]),[s,a]=b(!0),[c,n]=b(!1),[l,d]=b({...Qe}),[h,u]=b(!1),[p,i]=b(null),[f,v]=b(null),[_,$]=b({});B(()=>{C()},[]);async function C(){a(!0);try{const o=await T("/api/v1/system/service");r(o.resource||[])}catch{r([])}finally{a(!1)}}function S(){d({...Qe}),i(null),n(!0)}async function m(o){v(o);try{await T(`/api/v1/system/service/${o}/test`),$({..._,[o]:{ok:!0,message:"Connection successful"}})}catch(k){$({..._,[o]:{ok:!1,message:k instanceof Error?k.message:"Connection failed"}})}finally{v(null)}}async function w(){u(!0),i(null);try{const o={name:l.name,driver:l.driver,dsn:l.dsn};l.schema&&(o.schema=l.schema);const k=await T("/api/v1/system/service",{method:"POST",body:o});n(!1),await C(),k?.connection_warning&&$({..._,[l.name]:{ok:!1,message:k.connection_warning}})}catch(o){i(o instanceof Error?o.message:"Failed to save service")}finally{u(!1)}}async function P(o){if(confirm(`Delete service "${o}"? This cannot be undone.`))try{await T(`/api/v1/system/service/${o}`,{method:"DELETE"}),C()}catch{}}function H(o){switch(o){case"postgres":return"postgres://user:pass@localhost:5432/dbname?sslmode=disable";case"mysql":return"user:pass@tcp(host:3306)/dbname";case"mssql":return"sqlserver://user:pass@localhost:1433?database=dbname";case"snowflake":return"user:pass@account/dbname/schema?warehouse=wh";default:return""}}function g(o){switch(o){case"mysql":return"Format: user:pass@tcp(host:port)/dbname — the tcp() wrapper is required";case"postgres":return"Format: postgres://user:pass@host:port/dbname?sslmode=disable";case"mssql":return"Format: sqlserver://user:pass@host:port?database=dbname";default:return"Full connection string for the database"}}return e("div",{class:"space-y-6",children:[e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Services"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Manage database connections"})]}),e("button",{onClick:S,class:"btn-primary flex items-center gap-2",children:[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})}),"Add Service"]})]}),s?e("div",{class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[1,2,3].map(o=>e("div",{class:"card animate-pulse",children:[e("div",{class:"h-4 bg-surface-overlay rounded w-1/2 mb-4"}),e("div",{class:"h-3 bg-surface-overlay rounded w-3/4 mb-2"}),e("div",{class:"h-3 bg-surface-overlay rounded w-1/3"})]},o))}):t.length===0?e("div",{class:"card text-center py-16",children:[e("div",{class:"text-text-muted mb-4",children:e("svg",{class:"w-12 h-12 mx-auto",viewBox:"0 0 20 20",fill:"currentColor",opacity:"0.3",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})}),e("h3",{class:"text-lg font-medium text-text-primary mb-2",children:"No services connected"}),e("p",{class:"text-sm text-text-secondary mb-6",children:"Add a database connection to start generating REST APIs."}),e("button",{onClick:S,class:"btn-primary",children:"Add Your First Service"})]}):e("div",{class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(o=>e("div",{class:"card group hover:border-border-default transition-colors",children:[e("div",{class:"flex items-start justify-between mb-3",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-brand/10 flex items-center justify-center shrink-0",children:e("span",{class:"text-sm font-bold text-brand uppercase",children:o.driver.slice(0,2)})}),e("div",{children:[e("h3",{class:"text-sm font-semibold text-text-primary",children:o.name}),e("p",{class:"text-xs text-text-muted",children:o.driver})]})]}),e(be,{status:o.is_active?"active":"inactive"})]}),o.schema&&e("div",{class:"text-xs font-mono text-text-secondary mb-3",children:[e("span",{class:"text-text-muted",children:"schema:"})," ",o.schema]}),_[o.name]&&e("div",{class:`text-xs p-2 rounded mb-3 ${_[o.name].ok?"bg-success/10 text-success":"bg-error/10 text-error"}`,children:_[o.name].message}),e("div",{class:"flex items-center gap-2 pt-3 border-t border-border-subtle",children:[e("button",{onClick:()=>m(o.name),disabled:f===o.name,class:"btn-ghost text-xs py-1.5 px-3",children:f===o.name?"Testing...":"Test"}),e("a",{href:`/schema?service=${o.name}`,class:"btn-ghost text-xs py-1.5 px-3",children:"Schema"}),e("button",{onClick:()=>P(o.name),class:"btn-ghost text-xs py-1.5 px-3 text-error hover:text-error ml-auto",children:"Delete"})]})]},o.name))}),e(fe,{isOpen:c,onClose:()=>n(!1),title:"Add Service",width:"max-w-xl",children:e("div",{class:"space-y-4",children:[p&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:p}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Service Name"}),e("input",{type:"text",class:"input w-full",placeholder:"my-database",value:l.name,onInput:o=>d({...l,name:o.target.value})}),e("p",{class:"text-xs text-text-muted mt-1",children:"Unique identifier used in API URLs (e.g. /api/v1/my-database/_table/...)"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Database Driver"}),e("div",{class:"grid grid-cols-2 gap-2",children:Xt.map(o=>e("button",{onClick:()=>d({...l,driver:o.value}),class:`
                    p-3 rounded-lg border text-left text-sm font-medium transition-colors
                    ${l.driver===o.value?"border-brand bg-brand/10 text-brand":"border-border-default bg-surface hover:bg-surface-overlay text-text-secondary"}
                  `,children:o.label},o.value))})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"DSN (Connection String)"}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:H(l.driver),value:l.dsn,onInput:o=>d({...l,dsn:o.target.value})}),e("p",{class:"text-xs text-text-muted mt-1",children:g(l.driver)})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:["Schema ",e("span",{class:"text-text-muted font-normal",children:"(optional)"})]}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:"public",value:l.schema,onInput:o=>d({...l,schema:o.target.value})}),e("p",{class:"text-xs text-text-muted mt-1",children:"Database schema to use (defaults to driver default)"})]}),e("div",{class:"flex items-center justify-end gap-2 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>n(!1),class:"btn-ghost text-sm",children:"Cancel"}),e("button",{onClick:w,disabled:h||!l.name||!l.dsn,class:"btn-primary text-sm",children:h?"Saving...":"Add Service"})]})]})})]})}function Zt(){const[t,r]=b([]),[s,a]=b(""),[c,n]=b([]),[l,d]=b(""),[h,u]=b([]),[p,i]=b(!1),[f,v]=b(!1),[_,$]=b(""),[C,S]=b("none"),[m,w]=b(new Set),[P,H]=b(null),[g,o]=b(null),[k,I]=b(!1),[y,M]=b(!1);B(()=>{T("/api/v1/system/service").then(x=>{const A=(x.resource||[]).map(re=>({name:re.name,driver:re.driver,schema_lock:re.schema_lock||"none"}));r(A);const Q=new URLSearchParams(window.location.search).get("service");Q&&A.find(re=>re.name===Q)?a(Q):A.length>0&&a(A[0].name)}).catch(()=>r([]))},[]),B(()=>{s&&(i(!0),d(""),u([]),T(`/api/v1/${s}/_schema`).then(x=>{const O=(x.resource||x.tables||[]).map(Q=>typeof Q=="string"?{name:Q}:{name:Q.name,type:Q.type});n(O)}).catch(()=>n([])).finally(()=>i(!1)))},[s]),B(()=>{if(!s)return;const x=t.find(A=>A.name===s);S(x?.schema_lock||"none"),D()},[s,t]);function D(){s&&(T(`/api/v1/system/contract/${s}`).then(x=>{const A=x.contracts||[];w(new Set(A.map(O=>O.table_name)))}).catch(()=>w(new Set)),T(`/api/v1/system/contract/${s}/diff`).then(x=>H(x)).catch(()=>H(null)))}B(()=>{!s||!l||(v(!0),T(`/api/v1/${s}/_schema/${l}`).then(x=>{const A=x.resource||x.columns||x.fields||[];u(A)}).catch(()=>u([])).finally(()=>v(!1)))},[s,l]);const F=c.filter(x=>x.name.toLowerCase().includes(_.toLowerCase()));function V(x){return P?.tables?.find(A=>A.table_name===x)}async function q(x){o(x);try{m.has(x)?await T(`/api/v1/system/contract/${s}/${x}`,{method:"DELETE"}):await T(`/api/v1/system/contract/${s}/${x}`,{method:"POST"}),D()}catch{}finally{o(null)}}async function X(x){I(!0);try{await T(`/api/v1/system/contract/${s}/${x}/promote`,{method:"POST"}),D()}catch{}finally{I(!1)}}async function ee(x){M(!0);try{await T(`/api/v1/system/contract/${s}/mode`,{method:"PUT",body:{mode:x}}),S(x),r(A=>A.map(O=>O.name===s?{...O,schema_lock:x}:O)),D()}catch{}finally{M(!1)}}function ve(x){if(!m.has(x))return null;const O=V(x);return!O||!O.has_drift?e("span",{class:"w-2 h-2 rounded-full bg-success shrink-0",title:"Locked - No drift"}):O.has_breaking?e("span",{class:"w-2 h-2 rounded-full bg-error shrink-0 animate-pulse",title:"Breaking drift detected"}):e("span",{class:"w-2 h-2 rounded-full bg-warning shrink-0",title:"Additive drift detected"})}function K(x){if(!x)return"text-text-secondary";const A=x.toLowerCase();return A.includes("int")||A.includes("serial")||A.includes("numeric")||A.includes("decimal")||A.includes("float")||A.includes("double")?"text-cyan-accent":A.includes("varchar")||A.includes("text")||A.includes("char")?"text-success":A.includes("bool")?"text-warning":A.includes("timestamp")||A.includes("date")||A.includes("time")?"text-purple-400":A.includes("json")||A.includes("jsonb")?"text-orange-400":A.includes("uuid")?"text-pink-400":"text-text-secondary"}const W=l?V(l):void 0,te=l?m.has(l):!1;return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Schema Explorer"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Browse tables, columns, and relationships"})]}),e("div",{class:"flex items-center gap-4 flex-wrap",children:[e("select",{class:"input w-64",value:s,onChange:x=>a(x.target.value),children:[e("option",{value:"",children:"Select a service..."}),t.map(x=>e("option",{value:x.name,children:[x.name," (",x.driver,")"]},x.name))]}),s&&e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-xs text-text-muted",children:"Schema Lock:"}),e("select",{class:"input text-xs py-1.5 w-28",value:C,disabled:y,onChange:x=>ee(x.target.value),children:[e("option",{value:"none",children:"None"}),e("option",{value:"auto",children:"Auto"}),e("option",{value:"strict",children:"Strict"})]}),C!=="none"&&e("span",{class:`text-xs px-2 py-0.5 rounded-full ${C==="strict"?"bg-error/10 text-error":"bg-warning/10 text-warning"}`,children:C==="strict"?"All changes blocked":"Breaking changes blocked"})]}),P&&P.has_drift&&e("div",{class:`text-xs px-2 py-0.5 rounded-full ${P.has_breaking?"bg-error/10 text-error":"bg-warning/10 text-warning"}`,children:[P.total_breaking>0&&`${P.total_breaking} breaking`,P.total_breaking>0&&P.total_additive>0&&", ",P.total_additive>0&&`${P.total_additive} additive`," ","change",P.total_breaking+P.total_additive!==1?"s":""]})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-12 gap-6 min-h-[60vh]",children:[e("div",{class:"lg:col-span-4 xl:col-span-3",children:e("div",{class:"card p-0 h-full flex flex-col",children:[e("div",{class:"p-3 border-b border-border-subtle",children:e("input",{type:"text",class:"input w-full text-sm",placeholder:"Filter tables...",value:_,onInput:x=>$(x.target.value)})}),e("div",{class:"flex-1 overflow-y-auto",children:p?e("div",{class:"p-4 space-y-2",children:[1,2,3,4,5].map(x=>e("div",{class:"h-8 bg-surface-overlay rounded animate-pulse"},x))}):F.length===0?e("div",{class:"p-4 text-center text-sm text-text-muted",children:s?"No tables found":"Select a service"}):e("div",{class:"p-1.5",children:F.map(x=>e("button",{onClick:()=>d(x.name),class:`
                        w-full text-left px-3 py-2 rounded-lg text-sm flex items-center justify-between
                        transition-colors duration-100
                        ${l===x.name?"bg-brand/10 text-brand":"text-text-secondary hover:bg-surface-overlay hover:text-text-primary"}
                      `,children:[e("span",{class:"flex items-center gap-2 min-w-0",children:[e("svg",{class:"w-4 h-4 shrink-0 text-text-muted",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z","clip-rule":"evenodd"})}),e("span",{class:"truncate font-mono text-xs",children:x.name})]}),e("span",{class:"flex items-center gap-1.5",children:[m.has(x.name)&&e("svg",{class:"w-3 h-3 shrink-0 text-text-muted",viewBox:"0 0 20 20",fill:"currentColor",title:"Locked",children:e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})}),ve(x.name)]})]},x.name))})}),c.length>0&&e("div",{class:"px-4 py-2 border-t border-border-subtle text-xs text-text-muted flex items-center justify-between",children:[e("span",{children:[F.length," of ",c.length," tables"]}),m.size>0&&e("span",{children:[m.size," locked"]})]})]})}),e("div",{class:"lg:col-span-8 xl:col-span-9",children:e("div",{class:"card p-0 h-full",children:l?e(oe,{children:[e("div",{class:"px-6 py-4 border-b border-border-subtle flex items-center justify-between",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary font-mono flex items-center gap-2",children:[l,te&&e("svg",{class:"w-4 h-4 text-text-muted",viewBox:"0 0 20 20",fill:"currentColor",title:"Locked",children:e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})})]}),e("p",{class:"text-xs text-text-muted mt-0.5",children:[h.length," columns",h.some(x=>x.is_primary_key)&&e("span",{children:[" · PK: ",h.filter(x=>x.is_primary_key).map(x=>x.name).join(", ")]})]})]}),e("div",{class:"flex items-center gap-2",children:[e("button",{onClick:()=>q(l),disabled:g===l,class:`text-xs py-1.5 px-3 rounded-lg transition-colors ${te?"bg-surface-overlay text-text-secondary hover:bg-error/10 hover:text-error":"bg-surface-overlay text-text-secondary hover:bg-brand/10 hover:text-brand"}`,children:g===l?"Loading...":te?"Unlock":"Lock"}),te&&W?.has_drift&&e("button",{onClick:()=>X(l),disabled:k,class:"text-xs py-1.5 px-3 rounded-lg bg-brand/10 text-brand hover:bg-brand/20 transition-colors",children:k?"Promoting...":"Promote"}),e("a",{href:`/api-explorer?service=${s}&table=${l}`,class:"btn-secondary text-xs py-1.5",children:"Query →"})]})]}),te&&W?.has_drift&&e("div",{class:`px-6 py-3 border-b border-border-subtle ${W.has_breaking?"bg-error/5":"bg-warning/5"}`,children:[e("div",{class:"flex items-center gap-2 mb-2",children:[e("span",{class:`w-2 h-2 rounded-full ${W.has_breaking?"bg-error":"bg-warning"}`}),e("span",{class:`text-xs font-medium ${W.has_breaking?"text-error":"text-warning"}`,children:"Schema Drift Detected"}),e("span",{class:"text-xs text-text-muted",children:"The live database schema differs from the locked API contract."})]}),e("div",{class:"space-y-1",children:W.items?.map((x,A)=>e("div",{class:"flex items-center gap-2 text-xs",children:[e("span",{class:`px-1.5 py-0.5 rounded text-[10px] font-medium uppercase ${x.type==="breaking"?"bg-error/10 text-error":"bg-warning/10 text-warning"}`,children:x.type}),e("span",{class:"text-text-secondary",children:x.description})]},A))})]}),f?e("div",{class:"p-6 space-y-3",children:[1,2,3,4].map(x=>e("div",{class:"h-12 bg-surface-overlay rounded animate-pulse"},x))}):e("div",{class:"overflow-x-auto",children:e("table",{class:"w-full text-sm",children:[e("thead",{children:e("tr",{class:"border-b border-border-subtle",children:[e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Column"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Type"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Nullable"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Default"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Constraints"})]})}),e("tbody",{children:h.map(x=>e("tr",{class:"border-b border-border-subtle last:border-0 hover:bg-surface-overlay/50 transition-colors",children:[e("td",{class:"px-6 py-3",children:e("span",{class:"font-mono text-sm text-text-primary flex items-center gap-2",children:[x.is_primary_key&&e("svg",{class:"w-3.5 h-3.5 text-warning shrink-0",viewBox:"0 0 20 20",fill:"currentColor",title:"Primary Key",children:e("path",{"fill-rule":"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z","clip-rule":"evenodd"})}),x.is_foreign_key&&e("svg",{class:"w-3.5 h-3.5 text-brand shrink-0",viewBox:"0 0 20 20",fill:"currentColor",title:"Foreign Key",children:e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})}),x.name]})}),e("td",{class:"px-6 py-3",children:e("span",{class:`font-mono text-xs ${K(x.db_type)}`,children:x.db_type})}),e("td",{class:"px-6 py-3",children:e("span",{class:`text-xs ${x.nullable?"text-text-muted":"text-warning"}`,children:x.nullable?"YES":"NOT NULL"})}),e("td",{class:"px-6 py-3",children:e("span",{class:"font-mono text-xs text-text-muted",children:x.default||"--"})}),e("td",{class:"px-6 py-3",children:e("div",{class:"flex items-center gap-1.5",children:[x.is_primary_key&&e("span",{class:"badge bg-warning/10 text-warning",children:"PK"}),x.is_foreign_key&&x.references&&e("button",{onClick:()=>d(x.references.table),class:"badge bg-brand/10 text-brand hover:bg-brand/20 transition-colors cursor-pointer",children:["FK → ",x.references.table,".",x.references.column]})]})})]},x.name))})]})})]}):e("div",{class:"flex items-center justify-center h-full min-h-[300px] text-text-muted text-sm",children:e("div",{class:"text-center",children:[e("svg",{class:"w-10 h-10 mx-auto mb-3",viewBox:"0 0 20 20",fill:"currentColor",opacity:"0.3",children:e("path",{"fill-rule":"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z","clip-rule":"evenodd"})}),"Select a table to view its schema"]})})})})]})]})}function er(t){return t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,r=>{let s="text-cyan-accent";if(/^"/.test(r)){if(/:$/.test(r))return s="text-brand-light",r=r.replace(/:$/,""),`<span class="${s}">${r}</span>:`;s="text-success"}else/true|false/.test(r)?s="text-warning":/null/.test(r)&&(s="text-text-muted");return`<span class="${s}">${r}</span>`})}function tr({data:t}){const r=JSON.stringify(t,null,2),s=er(r);return e("pre",{class:"font-mono text-sm leading-relaxed overflow-auto p-4 bg-surface rounded-lg border border-border-subtle",dangerouslySetInnerHTML:{__html:s}})}function R({code:t,language:r=""}){const[s,a]=b(!1);return e("div",{class:"relative group rounded-lg border border-border-subtle bg-surface overflow-hidden",children:[r&&e("div",{class:"px-4 py-1.5 border-b border-border-subtle text-xs font-mono text-text-muted bg-surface-raised",children:r}),e("button",{onClick:async()=>{try{await navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)}catch{const n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),a(!0),setTimeout(()=>a(!1),2e3)}},class:`
          absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium
          transition-all duration-150
          ${s?"bg-success/20 text-success":"bg-surface-overlay text-text-muted hover:text-text-primary opacity-0 group-hover:opacity-100"}
        `,children:s?e("span",{class:"flex items-center gap-1",children:[e("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})}),"Copied"]}):e("span",{class:"flex items-center gap-1",children:[e("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),"Copy"]})}),e("pre",{class:"p-4 overflow-x-auto text-sm font-mono leading-relaxed text-text-primary",children:e("code",{children:t})})]})}const rr=["GET","POST","PUT","PATCH","DELETE"];function sr(){const[t,r]=b("GET"),[s,a]=b("/api/v1/"),[c,n]=b([{key:"Content-Type",value:"application/json",enabled:!0},{key:"X-API-Key",value:"",enabled:!1}]),[l,d]=b(""),[h,u]=b(null),[p,i]=b(!1),[f,v]=b("body"),[_,$]=b("body");B(()=>{const g=new URLSearchParams(window.location.search),o=g.get("service"),k=g.get("table");o&&k?a(`/api/v1/${o}/_table/${k}`):o&&a(`/api/v1/${o}/_table/`)},[]);async function C(){i(!0),u(null);const g=performance.now();try{const o={};c.forEach(K=>{K.enabled&&K.key&&K.value&&(o[K.key]=K.value)});const k=localStorage.getItem("faucet_api_key");k&&!o["X-API-Key"]&&(o["X-API-Key"]=k);const I=localStorage.getItem("faucet_session");I&&!o.Authorization&&(o.Authorization=`Bearer ${I}`);const y={method:t,headers:o};["POST","PUT","PATCH"].includes(t)&&l&&(y.body=l);const M=await fetch(s,y),D=Math.round(performance.now()-g);let F;(M.headers.get("content-type")||"").includes("json")?F=await M.json():F=await M.text();const q={};M.headers.forEach((K,W)=>{q[W]=K});const X=typeof F=="string"?F:JSON.stringify(F),ee=new Blob([X]).size,ve=ee>1024?`${(ee/1024).toFixed(1)} KB`:`${ee} B`;u({status:M.status,statusText:M.statusText,headers:q,body:F,time:D,size:ve})}catch(o){const k=Math.round(performance.now()-g);u({status:0,statusText:"Network Error",headers:{},body:{error:o instanceof Error?o.message:"Request failed"},time:k,size:"0 B"})}finally{i(!1)}}function S(){const g=["curl"];return t!=="GET"&&g.push(`-X ${t}`),c.forEach(o=>{o.enabled&&o.key&&o.value&&g.push(`-H '${o.key}: ${o.value}'`)}),["POST","PUT","PATCH"].includes(t)&&l&&g.push(`-d '${l}'`),g.push(`'${window.location.origin}${s}'`),g.join(` \\
  `)}function m(){n([...c,{key:"",value:"",enabled:!0}])}function w(g){n(c.filter((o,k)=>k!==g))}function P(g,o,k){const I=[...c];I[g][o]=k,n(I)}function H(g){return g>=200&&g<300?"text-success":g>=300&&g<400?"text-brand":g>=400&&g<500?"text-warning":"text-error"}return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"API Explorer"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Test API endpoints interactively"})]}),e("div",{class:"card p-0",children:[e("div",{class:"flex items-center gap-0 border-b border-border-subtle",children:[e("select",{class:"h-12 px-4 bg-transparent border-r border-border-subtle text-sm font-semibold focus:outline-none cursor-pointer",value:t,onChange:g=>r(g.target.value),style:{color:t==="GET"?"#00c853":t==="POST"?"#0066FF":t==="DELETE"?"#ff1744":t==="PUT"?"#ffab00":"#fb923c"},children:rr.map(g=>e("option",{value:g,children:g},g))}),e("input",{type:"text",class:"flex-1 h-12 px-4 bg-transparent text-sm font-mono text-text-primary placeholder-text-muted focus:outline-none",placeholder:"/api/v1/myservice/_table/users",value:s,onInput:g=>a(g.target.value),onKeyDown:g=>{g.key==="Enter"&&C()}}),e("button",{onClick:C,disabled:p,class:"h-12 px-6 bg-brand text-white text-sm font-semibold hover:bg-brand-light transition-colors disabled:opacity-50 rounded-none rounded-tr-xl",children:p?e("span",{class:"flex items-center gap-2",children:[e("svg",{class:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sending"]}):"Send"})]}),e("div",{class:"border-b border-border-subtle",children:e("div",{class:"flex",children:["body","headers","curl"].map(g=>e("button",{onClick:()=>v(g),class:`px-4 py-2.5 text-xs font-medium capitalize transition-colors border-b-2 -mb-px ${f===g?"border-brand text-brand":"border-transparent text-text-muted hover:text-text-secondary"}`,children:[g,g==="headers"&&e("span",{class:"ml-1.5 px-1.5 py-0.5 rounded-full text-[10px] bg-surface-overlay",children:c.filter(o=>o.enabled).length})]},g))})}),e("div",{class:"p-4",children:[f==="body"&&e("textarea",{class:"input w-full h-32 font-mono text-sm resize-y",placeholder:`{
  "field": "value"
}`,value:l,onInput:g=>d(g.target.value)}),f==="headers"&&e("div",{class:"space-y-2",children:[c.map((g,o)=>e("div",{class:"flex items-center gap-2",children:[e("input",{type:"checkbox",checked:g.enabled,onChange:k=>P(o,"enabled",k.target.checked),class:"rounded border-border-default bg-surface text-brand focus:ring-brand/50"}),e("input",{type:"text",class:"input flex-1 text-sm font-mono",placeholder:"Header name",value:g.key,onInput:k=>P(o,"key",k.target.value)}),e("input",{type:"text",class:"input flex-1 text-sm font-mono",placeholder:"Value",value:g.value,onInput:k=>P(o,"value",k.target.value)}),e("button",{onClick:()=>w(o),class:"p-2 text-text-muted hover:text-error transition-colors",children:e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})})]},o)),e("button",{onClick:m,class:"btn-ghost text-xs",children:"+ Add Header"})]}),f==="curl"&&e(R,{code:S(),language:"bash"})]})]}),h&&e("div",{class:"card p-0 animate-fade-in",children:[e("div",{class:"flex items-center justify-between px-4 py-3 border-b border-border-subtle",children:[e("div",{class:"flex items-center gap-4",children:[e("span",{class:`font-mono font-bold text-sm ${H(h.status)}`,children:[h.status," ",h.statusText]}),e("span",{class:`badge ${h.status>=200&&h.status<300?"bg-success/10 text-success":h.status>=400?"bg-error/10 text-error":"bg-warning/10 text-warning"}`,children:h.status>=200&&h.status<300?"Success":h.status>=400?"Error":"Redirect"})]}),e("div",{class:"flex items-center gap-4 text-xs text-text-muted font-mono",children:[e("span",{children:[h.time,"ms"]}),e("span",{children:h.size})]})]}),e("div",{class:"border-b border-border-subtle",children:e("div",{class:"flex",children:["body","headers"].map(g=>e("button",{onClick:()=>$(g),class:`px-4 py-2.5 text-xs font-medium capitalize transition-colors border-b-2 -mb-px ${_===g?"border-brand text-brand":"border-transparent text-text-muted hover:text-text-secondary"}`,children:g},g))})}),e("div",{class:"p-4 max-h-[60vh] overflow-y-auto",children:_==="body"?typeof h.body=="object"?e(tr,{data:h.body}):e("pre",{class:"font-mono text-sm text-text-primary whitespace-pre-wrap",children:String(h.body)}):e("div",{class:"space-y-1",children:Object.entries(h.headers).map(([g,o])=>e("div",{class:"flex gap-2 text-sm font-mono",children:[e("span",{class:"text-brand-light",children:[g,":"]}),e("span",{class:"text-text-secondary",children:o})]},g))})})]})]})}function xt({columns:t,data:r,keyField:s,emptyMessage:a="No data to display",onRowClick:c}){return r.length===0?e("div",{class:"card text-center py-12",children:e("div",{class:"text-text-muted text-sm",children:a})}):e("div",{class:"overflow-x-auto rounded-xl border border-border-subtle",children:e("table",{class:"w-full text-sm",children:[e("thead",{children:e("tr",{class:"border-b border-border-subtle bg-surface-raised",children:t.map(n=>e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",style:n.width?{width:n.width}:void 0,children:n.header},n.key))})}),e("tbody",{children:r.map(n=>e("tr",{class:`
                border-b border-border-subtle last:border-0
                bg-surface-raised
                ${c?"cursor-pointer hover:bg-surface-overlay":""}
                transition-colors duration-100
              `,onClick:()=>c?.(n),children:t.map(l=>e("td",{class:"px-4 py-3 text-text-primary",children:l.render?l.render(n):String(n[l.key]??"")},l.key))},n[s]))})]})})}const ft=1,bt=2,vt=4,gt=8,yt=16;function nr(t){return{service_name:t.service_name,component:t.component,allow_get:(t.verb_mask&ft)!==0,allow_post:(t.verb_mask&bt)!==0,allow_put:(t.verb_mask&vt)!==0,allow_patch:(t.verb_mask&gt)!==0,allow_delete:(t.verb_mask&yt)!==0}}function ar(t){let r=0;return t.allow_get&&(r|=ft),t.allow_post&&(r|=bt),t.allow_put&&(r|=vt),t.allow_patch&&(r|=gt),t.allow_delete&&(r|=yt),{service_name:t.service_name,component:t.component,verb_mask:r}}const he={service_name:"*",component:"*",allow_get:!0,allow_post:!1,allow_put:!1,allow_patch:!1,allow_delete:!1};function lr(){const[t,r]=b([]),[s,a]=b(!0),[c,n]=b(!1),[l,d]=b(null),[h,u]=b({name:"",description:"",is_active:!0,access:[{...he}]}),[p,i]=b(!1),[f,v]=b(null);B(()=>{_()},[]);async function _(){a(!0);try{const o=await T("/api/v1/system/role");r(o.resource||[])}catch{r([])}finally{a(!1)}}function $(){u({name:"",description:"",is_active:!0,access:[{...he}]}),d(null),v(null),n(!0)}function C(o){const k=o.access&&o.access.length>0?o.access.map(nr):[{...he}];u({name:o.name,description:o.description,is_active:o.is_active,access:k}),d(o.id),v(null),n(!0)}async function S(){i(!0),v(null);try{const o={name:h.name,description:h.description,is_active:h.is_active,access:h.access.map(ar)};l?await T(`/api/v1/system/role/${l}`,{method:"PUT",body:o}):await T("/api/v1/system/role",{method:"POST",body:o}),n(!1),_()}catch(o){v(o instanceof Error?o.message:"Failed to save role")}finally{i(!1)}}async function m(o,k){if(confirm(`Delete role "${k}"?`))try{await T(`/api/v1/system/role/${o}`,{method:"DELETE"}),_()}catch{}}function w(){u({...h,access:[...h.access,{...he}]})}function P(o){u({...h,access:h.access.filter((k,I)=>I!==o)})}function H(o,k,I){const y=[...h.access];y[o][k]=I,u({...h,access:y})}return e("div",{class:"space-y-6",children:[e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Roles"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Manage RBAC roles and permissions"})]}),e("button",{onClick:$,class:"btn-primary flex items-center gap-2",children:[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})}),"Create Role"]})]}),s?e("div",{class:"space-y-3",children:[1,2,3].map(o=>e("div",{class:"h-16 bg-surface-raised rounded-xl border border-border-subtle animate-pulse"},o))}):e(xt,{columns:[{key:"name",header:"Name",render:o=>e("span",{class:"font-semibold text-text-primary",children:o.name})},{key:"description",header:"Description",render:o=>e("span",{class:"text-text-secondary text-sm",children:o.description||"--"})},{key:"access",header:"Access Rules",render:o=>e("span",{class:"font-mono text-xs text-text-secondary",children:[o.access?.length||0," rule",o.access?.length!==1?"s":""]})},{key:"is_active",header:"Status",render:o=>e(be,{status:o.is_active?"active":"inactive"})},{key:"actions",header:"",width:"120px",render:o=>e("div",{class:"flex items-center gap-2 justify-end",children:[e("button",{onClick:k=>{k.stopPropagation(),C(o)},class:"btn-ghost text-xs py-1 px-2",children:"Edit"}),e("button",{onClick:k=>{k.stopPropagation(),m(o.id,o.name)},class:"btn-ghost text-xs py-1 px-2 text-error",children:"Delete"})]})}],data:t,keyField:"id",emptyMessage:"No roles defined. Create a role to control API access.",onRowClick:C}),e(fe,{isOpen:c,onClose:()=>n(!1),title:l?"Edit Role":"Create Role",width:"max-w-2xl",children:e("div",{class:"space-y-6",children:[f&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:f}),e("div",{class:"grid grid-cols-2 gap-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Role Name"}),e("input",{type:"text",class:"input w-full",placeholder:"viewer",value:h.name,onInput:o=>u({...h,name:o.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Status"}),e("select",{class:"input w-full",value:h.is_active?"active":"inactive",onChange:o=>u({...h,is_active:o.target.value==="active"}),children:[e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),e("div",{class:"col-span-2",children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Description"}),e("input",{type:"text",class:"input w-full",placeholder:"Read-only access to all resources",value:h.description,onInput:o=>u({...h,description:o.target.value})})]})]}),e("div",{children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("label",{class:"text-sm font-medium text-text-secondary",children:"Access Rules"}),e("button",{onClick:w,class:"btn-ghost text-xs py-1",children:"+ Add Rule"})]}),e("div",{class:"space-y-3",children:h.access.map((o,k)=>e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("span",{class:"text-xs font-medium text-text-muted",children:["Rule ",k+1]}),h.access.length>1&&e("button",{onClick:()=>P(k),class:"text-xs text-error hover:text-error/80",children:"Remove"})]}),e("div",{class:"grid grid-cols-2 gap-3 mb-3",children:[e("div",{children:[e("label",{class:"block text-xs text-text-muted mb-1",children:"Service"}),e("input",{type:"text",class:"input w-full text-sm font-mono",placeholder:"* (all)",value:o.service_name,onInput:I=>H(k,"service_name",I.target.value)})]}),e("div",{children:[e("label",{class:"block text-xs text-text-muted mb-1",children:"Component"}),e("input",{type:"text",class:"input w-full text-sm font-mono",placeholder:"* (all)",value:o.component,onInput:I=>H(k,"component",I.target.value)})]})]}),e("div",{class:"flex flex-wrap gap-3",children:["GET","POST","PUT","PATCH","DELETE"].map(I=>{const y=`allow_${I.toLowerCase()}`;return e("label",{class:"flex items-center gap-1.5 text-xs cursor-pointer",children:[e("input",{type:"checkbox",checked:o[y],onChange:M=>H(k,y,M.target.checked),class:"rounded border-border-default bg-surface text-brand focus:ring-brand/50"}),e("span",{class:"text-text-secondary font-mono",children:I})]},I)})})]},k))})]}),e("div",{class:"flex items-center justify-end gap-2 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>n(!1),class:"btn-ghost text-sm",children:"Cancel"}),e("button",{onClick:S,disabled:p||!h.name,class:"btn-primary text-sm",children:p?"Saving...":l?"Update Role":"Create Role"})]})]})})]})}function cr(){const[t,r]=b([]),[s,a]=b([]),[c,n]=b(!0),[l,d]=b(!1),[h,u]=b(!1),[p,i]=b(""),[f,v]=b({name:"",role_id:"",expires_in_days:0}),[_,$]=b(!1),[C,S]=b(null);B(()=>{m(),w();const y=setInterval(m,3e4);return()=>clearInterval(y)},[]);async function m(){n(!0);try{const y=await T("/api/v1/system/api-key");r(y.resource||[])}catch{r([])}finally{n(!1)}}async function w(){try{const y=await T("/api/v1/system/role");a((y.resource||[]).map(M=>({id:M.id,name:M.name})))}catch{a([])}}function P(){v({name:"",role_id:s[0]?.id||"",expires_in_days:0}),S(null),d(!0)}async function H(){$(!0),S(null);try{const y={label:f.name,role_id:parseInt(f.role_id,10)};if(f.expires_in_days>0){const D=new Date;D.setDate(D.getDate()+f.expires_in_days),y.expires_at=D.toISOString()}const M=await T("/api/v1/system/api-key",{method:"POST",body:y});d(!1),i(M.api_key),u(!0),m()}catch(y){S(y instanceof Error?y.message:"Failed to create API key")}finally{$(!1)}}async function g(y,M){if(confirm(`Revoke API key "${M}"? This cannot be undone.`))try{await T(`/api/v1/system/api-key/${y}`,{method:"DELETE"}),m()}catch{}}function o(y){return y?new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"--"}function k(y){if(!y)return"Never";const M=Date.now(),D=new Date(y).getTime(),F=M-D,V=Math.floor(F/6e4);if(V<1)return"Just now";if(V<60)return`${V}m ago`;const q=Math.floor(V/60);if(q<24)return`${q}h ago`;const X=Math.floor(q/24);return X<30?`${X}d ago`:o(y)}return e("div",{class:"space-y-6",children:[e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"API Keys"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Create and manage API access tokens"})]}),e("button",{onClick:P,class:"btn-primary flex items-center gap-2",children:[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})}),"Create API Key"]})]}),e("div",{class:"p-4 rounded-xl border border-border-subtle bg-surface-raised flex items-start gap-3",children:[e("svg",{class:"w-5 h-5 text-brand shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})}),e("div",{class:"text-sm text-text-secondary",children:["API keys authenticate requests to Faucet. Include the key in the",e("code",{class:"px-1.5 py-0.5 rounded bg-surface-overlay font-mono text-xs text-cyan-accent mx-1",children:"X-API-Key"}),"header. Keys are hashed and cannot be retrieved after creation."]})]}),c?e("div",{class:"space-y-3",children:[1,2,3].map(y=>e("div",{class:"h-16 bg-surface-raised rounded-xl border border-border-subtle animate-pulse"},y))}):e(xt,{columns:[{key:"label",header:"Name",render:y=>e("div",{children:[e("span",{class:"font-semibold text-text-primary",children:y.label}),e("span",{class:"text-xs text-text-muted ml-2 font-mono",children:[y.key_prefix,"..."]})]})},{key:"role_name",header:"Role",render:y=>e("span",{class:"badge bg-brand/10 text-brand",children:y.role_name})},{key:"is_active",header:"Status",render:y=>e(be,{status:y.is_active?"active":"inactive"})},{key:"last_used",header:"Last Used",render:y=>e("span",{class:"text-sm text-text-secondary",children:k(y.last_used)})},{key:"expires_at",header:"Expires",render:y=>e("span",{class:"text-sm text-text-secondary",children:y.expires_at?o(y.expires_at):"Never"})},{key:"actions",header:"",width:"80px",render:y=>e("button",{onClick:M=>{M.stopPropagation(),g(y.id,y.label)},class:"btn-danger text-xs py-1 px-3",children:"Revoke"})}],data:t,keyField:"id",emptyMessage:"No API keys created yet. Create one to authenticate API requests."}),e(fe,{isOpen:l,onClose:()=>d(!1),title:"Create API Key",children:e("div",{class:"space-y-4",children:[C&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:C}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Key Name"}),e("input",{type:"text",class:"input w-full",placeholder:"production-backend",value:f.name,onInput:y=>v({...f,name:y.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Role"}),e("select",{class:"input w-full",value:f.role_id,onChange:y=>v({...f,role_id:y.target.value}),children:[e("option",{value:"",children:"Select a role..."}),s.map(y=>e("option",{value:y.id,children:y.name},y.id))]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:["Expires In ",e("span",{class:"text-text-muted font-normal",children:"(0 = never)"})]}),e("div",{class:"flex items-center gap-2",children:[e("input",{type:"number",class:"input w-24 font-mono",min:"0",value:f.expires_in_days,onInput:y=>v({...f,expires_in_days:parseInt(y.target.value)||0})}),e("span",{class:"text-sm text-text-muted",children:"days"})]})]}),e("div",{class:"flex items-center justify-end gap-2 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>d(!1),class:"btn-ghost text-sm",children:"Cancel"}),e("button",{onClick:H,disabled:_||!f.name||!f.role_id,class:"btn-primary text-sm",children:_?"Creating...":"Create Key"})]})]})}),e(fe,{isOpen:h,onClose:()=>u(!1),title:"API Key Created",children:e("div",{class:"space-y-4",children:[e("div",{class:"p-3 rounded-lg bg-warning/10 border border-warning/20 text-sm text-warning",children:"Copy this key now. It will not be shown again."}),e(R,{code:p}),e("div",{class:"flex justify-end pt-2",children:e("button",{onClick:()=>u(!1),class:"btn-primary text-sm",children:"Done"})})]})})]})}function ir(){const[t,r]=b([]),[s,a]=b(!0),[c,n]=b("info"),[l,d]=b({current:"",newPass:"",confirm:""}),[h,u]=b(null),[p,i]=b(!1);B(()=>{f()},[]);async function f(){a(!0);try{const _=await T("/api/v1/system/admin");r(_.resource||[])}catch{}finally{a(!1)}}const v=[{id:"info",label:"Server Info",icon:"~"},{id:"admins",label:"Admins",icon:"#"},{id:"about",label:"About",icon:"?"}];return s?e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Settings"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Server configuration"})]}),e("div",{class:"card animate-pulse",children:e("div",{class:"space-y-4",children:[1,2,3,4].map(_=>e("div",{class:"h-10 bg-surface-overlay rounded"},_))})})]}):e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Settings"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Server configuration and information"})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e("div",{class:"lg:col-span-1",children:e("nav",{class:"space-y-1",children:v.map(_=>e("button",{onClick:()=>n(_.id),class:`
                  w-full text-left px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2
                  transition-colors duration-150
                  ${c===_.id?"bg-brand/10 text-brand":"text-text-secondary hover:text-text-primary hover:bg-surface-overlay"}
                `,children:[e("span",{class:"w-6 text-center font-mono text-text-muted",children:_.icon}),_.label]},_.id))})}),e("div",{class:"lg:col-span-3",children:[c==="info"&&e("div",{class:"card space-y-6",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Server Information"}),e("p",{class:"text-sm text-text-muted",children:"Current configuration and runtime details"})]}),e("div",{class:"space-y-4",children:[e("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"API Base"}),e("p",{class:"text-sm font-mono text-text-primary",children:"/api/v1"})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Health Endpoint"}),e("p",{class:"text-sm font-mono text-text-primary",children:"/healthz"})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"OpenAPI Spec"}),e("a",{href:"/openapi.json",target:"_blank",class:"text-sm font-mono text-brand hover:text-brand-light",children:"/openapi.json"})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Authentication"}),e("p",{class:"text-sm font-mono text-text-primary",children:"X-API-Key / Bearer JWT"})]})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-2",children:"API Endpoints"}),e("div",{class:"space-y-1.5 font-mono text-xs",children:[e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-success font-semibold w-12",children:"GET"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_schema"]}),e("span",{class:"text-text-muted ml-auto",children:"List tables"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-success font-semibold w-12",children:"GET"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Query records"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-brand font-semibold w-12",children:"POST"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Create records"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-warning font-semibold w-12",children:"PUT"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Replace records"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-error font-semibold w-12",children:"DEL"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Delete records"})]})]})]})]})]}),c==="admins"&&e("div",{class:"card space-y-6",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Admin Accounts"}),e("p",{class:"text-sm text-text-muted",children:"Manage administrator accounts"})]}),e("div",{class:"overflow-x-auto rounded-lg border border-border-subtle",children:e("table",{class:"w-full text-sm",children:[e("thead",{children:e("tr",{class:"border-b border-border-subtle bg-surface",children:[e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Username"}),e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Email"}),e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Created"})]})}),e("tbody",{children:t.length===0?e("tr",{children:e("td",{colSpan:3,class:"px-4 py-8 text-center text-text-muted",children:"No admins found"})}):t.map(_=>e("tr",{class:"border-b border-border-subtle last:border-0",children:[e("td",{class:"px-4 py-3 font-medium text-text-primary",children:_.username}),e("td",{class:"px-4 py-3 text-text-secondary",children:_.email||"--"}),e("td",{class:"px-4 py-3 text-text-secondary text-xs",children:_.created_at?new Date(_.created_at).toLocaleDateString():"--"})]},_.id))})]})})]}),c==="about"&&e("div",{class:"card space-y-6",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"About Faucet"}),e("p",{class:"text-sm text-text-muted",children:"Open-source database-to-REST API generator"})]}),e("div",{class:"space-y-4",children:[e("div",{class:"flex items-center gap-4 p-4 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-brand to-cyan-accent flex items-center justify-center shrink-0",children:e("svg",{class:"w-6 h-6 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})}),e("div",{children:[e("p",{class:"text-sm font-semibold text-text-primary",children:"Faucet"}),e("p",{class:"text-xs text-text-muted",children:"Turn any SQL database into a secure REST API. Single binary, zero configuration."})]})]}),e("div",{class:"grid grid-cols-2 gap-4",children:[e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Built With"}),e("p",{class:"text-sm text-text-primary",children:"Go + Chi + sqlx"})]}),e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Frontend"}),e("p",{class:"text-sm text-text-primary",children:"Preact + Tailwind"})]}),e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Supported DBs"}),e("p",{class:"text-sm text-text-primary",children:"PostgreSQL, MySQL, MSSQL, Snowflake"})]}),e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Features"}),e("p",{class:"text-sm text-text-primary",children:"RBAC, MCP Server, OpenAPI"})]})]})]})]})]})]})]})}function or(){const[t,r]=b(null),[s,a]=b(!0),[c,n]=b(null),[l,d]=b("overview");B(()=>{h()},[]);async function h(){a(!0);try{const m=await T("/api/v1/system/mcp");r(m)}catch(m){n(m instanceof Error?m.message:"Failed to load MCP info")}finally{a(!1)}}const u=[{id:"overview",label:"Overview",icon:"~"},{id:"connect",label:"Connect",icon:">"},{id:"tools",label:"Tools",icon:"#"},{id:"services",label:"Services",icon:"@"}];if(s)return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"MCP Server"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Model Context Protocol integration"})]}),e("div",{class:"card animate-pulse",children:e("div",{class:"space-y-4",children:[1,2,3,4].map(m=>e("div",{class:"h-10 bg-surface-overlay rounded"},m))})})]});if(c)return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"MCP Server"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Model Context Protocol integration"})]}),e("div",{class:"card",children:e("div",{class:"p-4 rounded-lg bg-error/10 border border-error/20",children:e("p",{class:"text-sm text-error",children:c})})})]});const p=t?.mcp_endpoint||`${window.location.origin}/mcp`,i=JSON.stringify({mcpServers:{faucet:{url:p,headers:{"X-API-Key":"YOUR_API_KEY"}}}},null,2),f=`claude mcp add faucet --transport http "${p}" --header "X-API-Key: YOUR_API_KEY"`,v=JSON.stringify({mcpServers:{faucet:{url:p,headers:{"X-API-Key":"YOUR_API_KEY"}}}},null,2),_=`{
  "type": "mcp",
  "server_label": "faucet",
  "server_url": "${p}",
  "headers": {
    "X-API-Key": "YOUR_API_KEY"
  }
}`,$=`curl -X POST ${p} \\
  -H "Content-Type: application/json" \\
  -H "Accept: application/json, text/event-stream" \\
  -H "X-API-Key: YOUR_API_KEY" \\
  -d '{"jsonrpc":"2.0","id":1,"method":"initialize","params":{"protocolVersion":"2025-03-26","capabilities":{},"clientInfo":{"name":"test","version":"1.0"}}}'`,C=JSON.stringify({mcpServers:{faucet:{command:"faucet",args:["mcp"]}}},null,2);return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"MCP Server"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Connect AI assistants to your databases via the Model Context Protocol"})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e("div",{class:"lg:col-span-1",children:e("nav",{class:"space-y-1",children:u.map(m=>e("button",{onClick:()=>d(m.id),class:`
                  w-full text-left px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2
                  transition-colors duration-150
                  ${l===m.id?"bg-brand/10 text-brand":"text-text-secondary hover:text-text-primary hover:bg-surface-overlay"}
                `,children:[e("span",{class:"w-6 text-center font-mono text-text-muted",children:m.icon}),m.label]},m.id))})}),e("div",{class:"lg:col-span-3",children:[l==="overview"&&e("div",{class:"space-y-6",children:[e("div",{class:"card border-brand/30 bg-brand/5 space-y-3",children:[e("div",{class:"flex items-center gap-2",children:[e("div",{class:"w-2.5 h-2.5 rounded-full bg-success animate-pulse"}),e("h2",{class:"text-base font-semibold text-text-primary",children:"MCP Endpoint Active"})]}),e("p",{class:"text-sm text-text-secondary",children:"AI tools can connect to your Faucet instance remotely via Streamable HTTP:"}),e(R,{code:p,language:"text"}),e("p",{class:"text-xs text-text-muted",children:["Authenticate with an API key via the ",e("code",{class:"px-1 py-0.5 rounded bg-surface-overlay text-text-primary font-mono",children:"X-API-Key"})," header or ",e("code",{class:"px-1 py-0.5 rounded bg-surface-overlay text-text-primary font-mono",children:"Authorization: Bearer"})," token."]})]}),e("div",{class:"card space-y-6",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Server Status"}),e("p",{class:"text-sm text-text-muted",children:"Faucet includes a built-in MCP server that exposes your databases as tools for AI agents."})]}),e("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Server"}),e("p",{class:"text-sm font-medium text-text-primary",children:t?.server_name})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Version"}),e("p",{class:"text-sm font-mono text-text-primary",children:t?.server_version})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Exposed Databases"}),e("p",{class:"text-sm font-medium text-text-primary",children:t?.services?.length||0})]})]})]}),e("div",{class:"card space-y-4",children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"What is MCP?"}),e("p",{class:"text-sm text-text-secondary leading-relaxed",children:["The ",e("span",{class:"font-medium text-text-primary",children:"Model Context Protocol"})," (MCP) is an open standard that lets AI assistants like Claude, ChatGPT, Cursor, and Windsurf directly interact with external tools and data sources. Faucet's MCP server exposes your configured database services so AI agents can discover schemas, query data, and perform CRUD operations — all through a standardized interface."]}),e("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e("div",{class:"flex items-start gap-3 p-3 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"w-8 h-8 rounded-lg bg-brand/10 flex items-center justify-center shrink-0 mt-0.5",children:e("svg",{class:"w-4 h-4 text-brand",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M4.083 9h1.946c.089-1.546.383-2.97.837-4.118A6.004 6.004 0 004.083 9zM10 2a8 8 0 100 16 8 8 0 000-16zm0 2c-.076 0-.232.032-.465.262-.238.234-.497.623-.737 1.182-.389.907-.673 2.142-.766 3.556h3.936c-.093-1.414-.377-2.649-.766-3.556-.24-.56-.5-.948-.737-1.182C10.232 4.032 10.076 4 10 4zm3.971 5c-.089-1.546-.383-2.97-.837-4.118A6.004 6.004 0 0115.917 9h-1.946zm-2.003 2H8.032c.093 1.414.377 2.649.766 3.556.24.56.5.948.737 1.182.233.23.389.262.465.262.076 0 .232-.032.465-.262.238-.234.497-.623.737-1.182.389-.907.673-2.142.766-3.556zm1.166 4.118c.454-1.147.748-2.572.837-4.118h1.946a6.004 6.004 0 01-2.783 4.118zm-6.268 0C6.412 13.97 6.118 12.546 6.03 11H4.083a6.004 6.004 0 002.783 4.118z","clip-rule":"evenodd"})})}),e("div",{children:[e("p",{class:"text-sm font-medium text-text-primary",children:"Remote HTTP Access"}),e("p",{class:"text-xs text-text-muted",children:"Connect any AI tool over the network — no CLI needed"})]})]}),e("div",{class:"flex items-start gap-3 p-3 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"w-8 h-8 rounded-lg bg-success/10 flex items-center justify-center shrink-0 mt-0.5",children:e("svg",{class:"w-4 h-4 text-success",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})})}),e("div",{children:[e("p",{class:"text-sm font-medium text-text-primary",children:"Schema Discovery"}),e("p",{class:"text-xs text-text-muted",children:"AI can explore tables, columns, and relationships"})]})]}),e("div",{class:"flex items-start gap-3 p-3 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"w-8 h-8 rounded-lg bg-success/10 flex items-center justify-center shrink-0 mt-0.5",children:e("svg",{class:"w-4 h-4 text-success",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})})}),e("div",{children:[e("p",{class:"text-sm font-medium text-text-primary",children:"Safe Queries"}),e("p",{class:"text-xs text-text-muted",children:"Parameterized queries prevent SQL injection"})]})]}),e("div",{class:"flex items-start gap-3 p-3 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"w-8 h-8 rounded-lg bg-success/10 flex items-center justify-center shrink-0 mt-0.5",children:e("svg",{class:"w-4 h-4 text-success",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})})}),e("div",{children:[e("p",{class:"text-sm font-medium text-text-primary",children:"Multi-Database"}),e("p",{class:"text-xs text-text-muted",children:"Expose PostgreSQL, MySQL, MSSQL, and Snowflake"})]})]})]})]}),e("div",{class:"card space-y-4",children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Transport Modes"}),e("div",{class:"space-y-3",children:t?.transports?.map(m=>e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"flex items-center gap-2 mb-2",children:[e("span",{class:`px-2 py-0.5 rounded text-xs font-mono font-medium ${m.type==="http"?"bg-brand/10 text-brand":"bg-surface-overlay text-text-secondary"}`,children:m.type}),m.type==="http"&&e("span",{class:"px-2 py-0.5 rounded text-xs font-medium bg-success/10 text-success",children:"Recommended"}),e("span",{class:"text-sm text-text-secondary",children:m.description})]}),m.endpoint&&e(R,{code:m.endpoint,language:"text"}),m.command&&e(R,{code:m.command,language:"bash"})]},m.type))})]})]}),l==="connect"&&e("div",{class:"space-y-6",children:[e("div",{class:"card border-brand/30 bg-brand/5 space-y-2",children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Remote HTTP Endpoint"}),e("p",{class:"text-sm text-text-secondary",children:"Faucet's MCP server is built into the main server — no separate process needed. Any MCP-compatible AI tool can connect over HTTP."}),e(R,{code:p,language:"text"})]}),e("div",{class:"card space-y-4",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-[#D97757]/10 flex items-center justify-center shrink-0",children:e("svg",{class:"w-5 h-5 text-[#D97757]",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Claude Desktop"}),e("p",{class:"text-sm text-text-muted",children:"Connect via remote HTTP endpoint"})]})]}),e("p",{class:"text-sm text-text-secondary",children:["Add the following to your Claude Desktop config file. On macOS:"," ",e("code",{class:"px-1.5 py-0.5 rounded bg-surface-overlay text-text-primary text-xs font-mono",children:"~/Library/Application Support/Claude/claude_desktop_config.json"})]}),e(R,{code:i,language:"json"}),e("p",{class:"text-xs text-text-muted",children:["Replace ",e("code",{class:"font-mono",children:"YOUR_API_KEY"})," with a Faucet API key from the"," ",e("a",{href:"/api-keys",class:"text-brand hover:text-brand-light",children:"API Keys"})," page."]})]}),e("div",{class:"card space-y-4",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-[#D97757]/10 flex items-center justify-center shrink-0",children:e("svg",{class:"w-5 h-5 text-[#D97757]",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Claude Code (CLI)"}),e("p",{class:"text-sm text-text-muted",children:"Register via command line"})]})]}),e("p",{class:"text-sm text-text-secondary",children:"Register Faucet as a remote MCP server:"}),e(R,{code:f,language:"bash"})]}),e("div",{class:"card space-y-4",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-[#10A37F]/10 flex items-center justify-center shrink-0",children:e("svg",{class:"w-5 h-5 text-[#10A37F]",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zM8.5 7.5a1.5 1.5 0 113 0v4a1.5 1.5 0 01-3 0v-4zm1.5 8a1 1 0 100-2 1 1 0 000 2z"})})}),e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"ChatGPT / OpenAI"}),e("p",{class:"text-sm text-text-muted",children:"Use with the Responses API"})]})]}),e("p",{class:"text-sm text-text-secondary",children:"Add Faucet as an MCP tool in your OpenAI Responses API calls:"}),e(R,{code:_,language:"json"})]}),e("div",{class:"card space-y-4",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-brand/10 flex items-center justify-center shrink-0",children:e("svg",{class:"w-5 h-5 text-brand",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Cursor"}),e("p",{class:"text-sm text-text-muted",children:"Add to Cursor's MCP configuration"})]})]}),e("p",{class:"text-sm text-text-secondary",children:["Add the following to"," ",e("code",{class:"px-1.5 py-0.5 rounded bg-surface-overlay text-text-primary text-xs font-mono",children:"~/.cursor/mcp.json"})]}),e(R,{code:v,language:"json"})]}),e("div",{class:"card space-y-4",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-surface-overlay flex items-center justify-center shrink-0",children:e("svg",{class:"w-5 h-5 text-text-secondary",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})})}),e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Test with curl"}),e("p",{class:"text-sm text-text-muted",children:"Verify the endpoint is working"})]})]}),e("p",{class:"text-sm text-text-secondary",children:"Send an MCP initialize request to verify connectivity:"}),e(R,{code:$,language:"bash"})]}),e("div",{class:"card space-y-4 opacity-80",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-surface-overlay flex items-center justify-center shrink-0",children:e("svg",{class:"w-5 h-5 text-text-muted",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})})}),e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Local Stdio Mode"}),e("p",{class:"text-sm text-text-muted",children:"For development or local-only setups"})]})]}),e("p",{class:"text-sm text-text-secondary",children:"If you prefer to run Faucet as a local subprocess (no network access needed):"}),e("div",{class:"space-y-3",children:[e("div",{children:[e("p",{class:"text-xs font-medium text-text-secondary mb-1",children:"Claude Desktop (stdio)"}),e(R,{code:C,language:"json"})]}),e("div",{children:[e("p",{class:"text-xs font-medium text-text-secondary mb-1",children:"Claude Code CLI (stdio)"}),e(R,{code:"claude mcp add faucet -- faucet mcp",language:"bash"})]})]})]})]}),l==="tools"&&e("div",{class:"space-y-6",children:[e("div",{class:"card space-y-4",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Available Tools"}),e("p",{class:"text-sm text-text-muted",children:"These tools are available to AI agents connected via MCP"})]}),e("div",{class:"space-y-2",children:t?.tools?.map(m=>e("div",{class:"flex items-start gap-3 p-3 rounded-lg bg-surface border border-border-subtle",children:[e("span",{class:`mt-0.5 px-2 py-0.5 rounded text-xs font-mono font-medium shrink-0 ${m.read_only?"bg-success/10 text-success":"bg-warning/10 text-warning"}`,children:m.read_only?"READ":"WRITE"}),e("div",{class:"min-w-0",children:[e("p",{class:"text-sm font-mono font-medium text-text-primary",children:m.name}),e("p",{class:"text-xs text-text-muted mt-0.5",children:m.description})]})]},m.name))})]}),e("div",{class:"card space-y-4",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Resources"}),e("p",{class:"text-sm text-text-muted",children:"MCP resources provide contextual data to AI agents"})]}),e("div",{class:"space-y-2",children:t?.resources?.map(m=>e("div",{class:"flex items-start gap-3 p-3 rounded-lg bg-surface border border-border-subtle",children:[e("span",{class:"mt-0.5 px-2 py-0.5 rounded text-xs font-mono font-medium shrink-0 bg-brand/10 text-brand",children:"URI"}),e("div",{class:"min-w-0",children:[e("p",{class:"text-sm font-mono font-medium text-text-primary",children:m.uri}),e("p",{class:"text-xs text-text-muted mt-0.5",children:m.description})]})]},m.uri))})]})]}),l==="services"&&e("div",{class:"card space-y-4",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Exposed Databases"}),e("p",{class:"text-sm text-text-muted",children:"These active database services are accessible through the MCP server"})]}),t?.services?.length===0?e("div",{class:"p-6 text-center rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-sm text-text-muted",children:"No active services configured."}),e("a",{href:"/services",class:"text-sm text-brand hover:text-brand-light mt-1 inline-block",children:"Add a database service"})]}):e("div",{class:"overflow-x-auto rounded-lg border border-border-subtle",children:e("table",{class:"w-full text-sm",children:[e("thead",{children:e("tr",{class:"border-b border-border-subtle bg-surface",children:[e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Service"}),e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Driver"}),e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Access"}),e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Raw SQL"})]})}),e("tbody",{children:t?.services?.map(m=>e("tr",{class:"border-b border-border-subtle last:border-0",children:[e("td",{class:"px-4 py-3 font-mono font-medium text-text-primary",children:m.name}),e("td",{class:"px-4 py-3 text-text-secondary",children:m.driver}),e("td",{class:"px-4 py-3",children:e("span",{class:`px-2 py-0.5 rounded text-xs font-medium ${m.read_only?"bg-success/10 text-success":"bg-warning/10 text-warning"}`,children:m.read_only?"Read-only":"Read/Write"})}),e("td",{class:"px-4 py-3",children:e("span",{class:`px-2 py-0.5 rounded text-xs font-medium ${m.raw_sql_allowed?"bg-warning/10 text-warning":"bg-surface-overlay text-text-muted"}`,children:m.raw_sql_allowed?"Enabled":"Disabled"})})]},m.name))})]})})]})]})]})]})}const dr=[{value:"postgres",label:"PostgreSQL"},{value:"mysql",label:"MySQL"},{value:"mssql",label:"SQL Server"},{value:"snowflake",label:"Snowflake"}];function Ye({onComplete:t}={}){const[r,s]=b("welcome"),[a,c]=b({email:"",password:"",confirmPassword:""}),[n,l]=b({name:"",driver:"postgres",dsn:"",schema:""}),[d,h]=b(null),[u,p]=b(!1),[i,f]=b(!1);async function v(){if(a.password!==a.confirmPassword){h("Passwords do not match");return}if(a.password.length<8){h("Password must be at least 8 characters");return}p(!0),h(null);try{const w=await fetch("/api/v1/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})});if(!w.ok){const H=await w.json().catch(()=>({}));throw new Error(H.error?.message||`Setup failed (${w.status})`)}const P=await w.json();P.session_token&&localStorage.setItem("faucet_session",P.session_token),s("database")}catch(w){h(w instanceof Error?w.message:"Failed to create admin account")}finally{p(!1)}}async function _(){p(!0),h(null);try{const w={name:n.name,driver:n.driver,dsn:n.dsn};n.schema&&(w.schema=n.schema),await T("/api/v1/system/service",{method:"POST",body:w}),s("done")}catch(w){h(w instanceof Error?w.message:"Failed to add database")}finally{p(!1)}}function $(w){switch(w){case"postgres":return"postgres://user:pass@localhost:5432/dbname?sslmode=disable";case"mysql":return"user:pass@tcp(localhost:3306)/dbname";case"mssql":return"sqlserver://user:pass@localhost:1433?database=dbname";case"snowflake":return"user:pass@account/dbname/schema?warehouse=wh";default:return""}}const C=[{key:"welcome",label:"Welcome"},{key:"admin",label:"Admin"},{key:"database",label:"Database"},{key:"done",label:"Done"}],m=["welcome","admin","database","done"].indexOf(r);return e("div",{class:"min-h-[80vh] flex items-center justify-center",children:e("div",{class:"w-full max-w-xl",children:[e("div",{class:"flex items-center justify-center gap-2 mb-8",children:C.map((w,P)=>e("div",{class:"flex items-center gap-2",children:[e("div",{class:`
                  w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold
                  transition-colors
                  ${P<m?"bg-brand text-white":P===m?"bg-brand/20 text-brand border-2 border-brand":"bg-surface-overlay text-text-muted border border-border-default"}
                `,children:P<m?e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})}):P+1}),P<C.length-1&&e("div",{class:`w-12 h-0.5 ${P<m?"bg-brand":"bg-border-default"}`})]},w.key))}),e("div",{class:"card animate-fade-in",children:[r==="welcome"&&e("div",{class:"text-center py-8",children:[e("img",{src:"/faucet-icon.svg",alt:"Faucet",width:"64",height:"64",class:"mx-auto mb-6"}),e("h1",{class:"text-2xl font-bold text-text-primary mb-3",children:"Welcome to Faucet"}),e("p",{class:"text-text-secondary mb-8 max-w-sm mx-auto",children:"Turn any SQL database into a secure REST API in minutes. Let's get your instance configured."}),e("button",{onClick:()=>s("admin"),class:"btn-primary text-base px-8 py-3",children:"Get Started"})]}),r==="admin"&&e("div",{children:[e("h2",{class:"text-xl font-semibold text-text-primary mb-2",children:"Create Admin Account"}),e("p",{class:"text-sm text-text-secondary mb-6",children:"Set up the administrator account for the Faucet dashboard."}),d&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error mb-4",children:d}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Email"}),e("input",{type:"email",class:"input w-full",placeholder:"admin@example.com",value:a.email,autoFocus:!0,onInput:w=>c({...a,email:w.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Password"}),e("input",{type:"password",class:"input w-full",placeholder:"Minimum 8 characters",value:a.password,onInput:w=>c({...a,password:w.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Confirm Password"}),e("input",{type:"password",class:"input w-full",placeholder:"Retype password",value:a.confirmPassword,onInput:w=>c({...a,confirmPassword:w.target.value})})]})]}),e("div",{class:"flex justify-end mt-6 pt-4 border-t border-border-subtle",children:e("button",{onClick:v,disabled:u||!a.email||!a.password,class:"btn-primary",children:u?"Creating...":"Create Admin & Continue"})})]}),r==="database"&&e("div",{children:[e("h2",{class:"text-xl font-semibold text-text-primary mb-2",children:"Connect a Database"}),e("p",{class:"text-sm text-text-secondary mb-6",children:"Add your first database connection. You can add more later."}),d&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error mb-4",children:d}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Service Name"}),e("input",{type:"text",class:"input w-full",placeholder:"my-database",value:n.name,onInput:w=>l({...n,name:w.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Database Driver"}),e("div",{class:"grid grid-cols-2 gap-2",children:dr.map(w=>e("button",{onClick:()=>l({...n,driver:w.value}),class:`
                          p-3 rounded-lg border text-left text-sm font-medium transition-colors
                          ${n.driver===w.value?"border-brand bg-brand/10 text-brand":"border-border-default bg-surface hover:bg-surface-overlay text-text-secondary"}
                        `,children:w.label},w.value))})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"DSN (Connection String)"}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:$(n.driver),value:n.dsn,onInput:w=>l({...n,dsn:w.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:["Schema ",e("span",{class:"text-text-muted font-normal",children:"(optional)"})]}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:"public",value:n.schema,onInput:w=>l({...n,schema:w.target.value})})]})]}),e("div",{class:"flex items-center justify-between mt-6 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>{f(!0),s("done")},class:"btn-ghost text-sm",children:"Skip for now"}),e("button",{onClick:_,disabled:u||!n.name||!n.dsn,class:"btn-primary",children:u?"Connecting...":"Connect & Finish"})]})]}),r==="done"&&e("div",{class:"text-center py-8",children:[e("div",{class:"w-16 h-16 rounded-full bg-success/10 flex items-center justify-center mx-auto mb-6",children:e("svg",{class:"w-8 h-8 text-success",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})})}),e("h2",{class:"text-2xl font-bold text-text-primary mb-3",children:"You're All Set!"}),e("p",{class:"text-text-secondary mb-8 max-w-sm mx-auto",children:i?"Your Faucet instance is ready. Add a database connection to start building APIs.":"Your database is connected and REST APIs are live. Explore your schema or test the API."}),e("div",{class:"flex items-center justify-center gap-3",children:[e("button",{onClick:()=>{t?t():window.location.href="/"},class:"btn-primary text-base px-6 py-2.5",children:"Go to Dashboard"}),!i&&e("button",{onClick:()=>{t&&t(),J("/schema",!0)},class:"btn-secondary text-base px-6 py-2.5",children:"Explore Schema"})]})]})]})]})})}function ur({onLogin:t}){const[r,s]=b(""),[a,c]=b(""),[n,l]=b(null),[d,h]=b(!1);async function u(p){p.preventDefault(),h(!0),l(null);try{const i=await T("/api/v1/system/admin/session",{method:"POST",body:{email:r,password:a}});i.session_token&&localStorage.setItem("faucet_session",i.session_token),t()}catch(i){l(i instanceof Error?i.message:"Login failed")}finally{h(!1)}}return e("div",{class:"min-h-screen flex items-center justify-center bg-surface p-4",children:e("div",{class:"w-full max-w-sm",children:[e("div",{class:"text-center mb-8",children:[e("img",{src:"/faucet-icon.svg",alt:"Faucet",width:"56",height:"56",class:"mx-auto mb-4"}),e("h1",{class:"text-xl font-bold text-text-primary",children:"Faucet Admin"}),e("p",{class:"text-sm text-text-muted mt-1",children:"Sign in to manage your instance"})]}),e("form",{onSubmit:u,class:"card space-y-4",children:[n&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:n}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Email"}),e("input",{type:"email",class:"input w-full",placeholder:"admin@example.com",value:r,autoFocus:!0,onInput:p=>s(p.target.value)})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Password"}),e("input",{type:"password",class:"input w-full",placeholder:"Enter password",value:a,onInput:p=>c(p.target.value)})]}),e("button",{type:"submit",disabled:d||!r||!a,class:"btn-primary w-full py-2.5",children:d?e("span",{class:"flex items-center justify-center gap-2",children:[e("svg",{class:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Signing in..."]}):"Sign In"})]})]})})}function hr(){const[t,r]=b(!1),[s,a]=b(window.location.pathname),[c,n]=b("loading");B(()=>{l()},[]);async function l(){const p=localStorage.getItem("faucet_session");if(!p){try{const i=await fetch("/api/v1/setup");i.ok&&(await i.json()).needs_setup?(n("setup"),J("/setup",!0)):n("login")}catch{n("login")}return}try{const i=await fetch("/api/v1/system/service",{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});i.ok?n("authenticated"):i.status===401?(localStorage.removeItem("faucet_session"),n("login")):n("authenticated")}catch{n("authenticated")}}function d(){n("authenticated"),J("/",!0)}function h(){localStorage.removeItem("faucet_session"),n("login"),J("/",!0)}const u=p=>{a(p.url),r(!1)};return c==="loading"?e("div",{class:"min-h-screen flex items-center justify-center bg-surface",children:e("div",{class:"flex items-center gap-3",children:[e("svg",{class:"w-5 h-5 animate-spin text-brand",viewBox:"0 0 24 24",fill:"none",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e("span",{class:"text-text-muted text-sm",children:"Loading..."})]})}):c==="setup"?e("div",{class:"min-h-screen bg-surface",children:e(Ye,{onComplete:()=>{n("authenticated"),J("/",!0)}})}):c==="login"?e(ur,{onLogin:d}):e("div",{class:"flex h-screen overflow-hidden bg-surface",children:[e(qt,{currentPath:s,isOpen:t,onClose:()=>r(!1)}),e("div",{class:"flex flex-col flex-1 min-w-0",children:[e(Wt,{onMenuClick:()=>r(!t),onLogout:h}),e("main",{class:"flex-1 overflow-y-auto p-6",children:e("div",{class:"max-w-7xl mx-auto animate-fade-in",children:e(mt,{onChange:u,children:[e(N,{path:"/",component:Gt}),e(N,{path:"/services",component:Jt}),e(N,{path:"/schema",component:Zt}),e(N,{path:"/api-explorer",component:sr}),e(N,{path:"/roles",component:lr}),e(N,{path:"/api-keys",component:cr}),e(N,{path:"/settings",component:ir}),e(N,{path:"/mcp",component:or}),e(N,{path:"/setup",component:Ye})]})})})]}),t&&e("div",{class:"fixed inset-0 bg-black/60 z-30 lg:hidden",onClick:()=>r(!1)})]})}const Ge=document.getElementById("app");Ge&&Pt(e(hr,{}),Ge);
