(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=s(l);fetch(l.href,n)}})();var X,$,Ue,N,Se,Oe,Ke,Ve,ve,ue,he,qe,G={},We=[],dt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Y=Array.isArray;function R(t,r){for(var s in r)t[s]=r[s];return t}function _e(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ye(t,r,s){var a,l,n,o={};for(n in r)n=="key"?a=r[n]:n=="ref"?l=r[n]:o[n]=r[n];if(arguments.length>2&&(o.children=arguments.length>3?X.call(arguments,2):s),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)o[n]===void 0&&(o[n]=t.defaultProps[n]);return q(t,o,a,l,null)}function q(t,r,s,a,l){var n={type:t,props:r,key:s,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++Ue,__i:-1,__u:0};return l==null&&$.vnode!=null&&$.vnode(n),n}function Z(t){return t.children}function W(t,r){this.props=t,this.context=r}function K(t,r){if(r==null)return t.__?K(t.__,t.__i+1):null;for(var s;r<t.__k.length;r++)if((s=t.__k[r])!=null&&s.__e!=null)return s.__e;return typeof t.type=="function"?K(t):null}function Qe(t){var r,s;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if((s=t.__k[r])!=null&&s.__e!=null){t.__e=t.__c.base=s.__e;break}return Qe(t)}}function pe(t){(!t.__d&&(t.__d=!0)&&N.push(t)&&!ae.__r++||Se!=$.debounceRendering)&&((Se=$.debounceRendering)||Oe)(ae)}function ae(){for(var t,r,s,a,l,n,o,u=1;N.length;)N.length>u&&N.sort(Ke),t=N.shift(),u=N.length,t.__d&&(s=void 0,a=void 0,l=(a=(r=t).__v).__e,n=[],o=[],r.__P&&((s=R({},a)).__v=a.__v+1,$.vnode&&$.vnode(s),ge(r.__P,s,a,r.__n,r.__P.namespaceURI,32&a.__u?[l]:null,n,l??K(a),!!(32&a.__u),o),s.__v=a.__v,s.__.__k[s.__i]=s,Xe(n,s,o),a.__e=a.__=null,s.__e!=l&&Qe(s)));ae.__r=0}function Ge(t,r,s,a,l,n,o,u,p,h,m){var i,f,x,_,S,C,k,d=a&&a.__k||We,g=r.length;for(p=ut(s,r,d,p,g),i=0;i<g;i++)(x=s.__k[i])!=null&&(f=x.__i==-1?G:d[x.__i]||G,x.__i=i,C=ge(t,x,f,l,n,o,u,p,h,m),_=x.__e,x.ref&&f.ref!=x.ref&&(f.ref&&we(f.ref,null,x),m.push(x.ref,x.__c||_,x)),S==null&&_!=null&&(S=_),(k=!!(4&x.__u))||f.__k===x.__k?p=Je(x,p,t,k):typeof x.type=="function"&&C!==void 0?p=C:_&&(p=_.nextSibling),x.__u&=-7);return s.__e=S,p}function ut(t,r,s,a,l){var n,o,u,p,h,m=s.length,i=m,f=0;for(t.__k=new Array(l),n=0;n<l;n++)(o=r[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=t.__k[n]=q(null,o,null,null,null):Y(o)?o=t.__k[n]=q(Z,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=t.__k[n]=q(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):t.__k[n]=o,p=n+f,o.__=t,o.__b=t.__b+1,u=null,(h=o.__i=ht(o,s,p,i))!=-1&&(i--,(u=s[h])&&(u.__u|=2)),u==null||u.__v==null?(h==-1&&(l>m?f--:l<m&&f++),typeof o.type!="function"&&(o.__u|=4)):h!=p&&(h==p-1?f--:h==p+1?f++:(h>p?f--:f++,o.__u|=4))):t.__k[n]=null;if(i)for(n=0;n<m;n++)(u=s[n])!=null&&(2&u.__u)==0&&(u.__e==a&&(a=K(u)),Ze(u,u));return a}function Je(t,r,s,a){var l,n;if(typeof t.type=="function"){for(l=t.__k,n=0;l&&n<l.length;n++)l[n]&&(l[n].__=t,r=Je(l[n],r,s,a));return r}t.__e!=r&&(a&&(r&&t.type&&!r.parentNode&&(r=K(t)),s.insertBefore(t.__e,r||null)),r=t.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType==8);return r}function me(t,r){return r=r||[],t==null||typeof t=="boolean"||(Y(t)?t.some(function(s){me(s,r)}):r.push(t)),r}function ht(t,r,s,a){var l,n,o,u=t.key,p=t.type,h=r[s],m=h!=null&&(2&h.__u)==0;if(h===null&&u==null||m&&u==h.key&&p==h.type)return s;if(a>(m?1:0)){for(l=s-1,n=s+1;l>=0||n<r.length;)if((h=r[o=l>=0?l--:n++])!=null&&(2&h.__u)==0&&u==h.key&&p==h.type)return o}return-1}function Pe(t,r,s){r[0]=="-"?t.setProperty(r,s??""):t[r]=s==null?"":typeof s!="number"||dt.test(r)?s:s+"px"}function te(t,r,s,a,l){var n,o;e:if(r=="style")if(typeof s=="string")t.style.cssText=s;else{if(typeof a=="string"&&(t.style.cssText=a=""),a)for(r in a)s&&r in s||Pe(t.style,r,"");if(s)for(r in s)a&&s[r]==a[r]||Pe(t.style,r,s[r])}else if(r[0]=="o"&&r[1]=="n")n=r!=(r=r.replace(Ve,"$1")),o=r.toLowerCase(),r=o in t||r=="onFocusOut"||r=="onFocusIn"?o.slice(2):r.slice(2),t.l||(t.l={}),t.l[r+n]=s,s?a?s.u=a.u:(s.u=ve,t.addEventListener(r,n?he:ue,n)):t.removeEventListener(r,n?he:ue,n);else{if(l=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in t)try{t[r]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&r[4]!="-"?t.removeAttribute(r):t.setAttribute(r,r=="popover"&&s==1?"":s))}}function $e(t){return function(r){if(this.l){var s=this.l[r.type+t];if(r.t==null)r.t=ve++;else if(r.t<s.u)return;return s($.event?$.event(r):r)}}}function ge(t,r,s,a,l,n,o,u,p,h){var m,i,f,x,_,S,C,k,d,g,E,M,b,c,w,A,y,P=r.type;if(r.constructor!==void 0)return null;128&s.__u&&(p=!!(32&s.__u),n=[u=r.__e=s.__e]),(m=$.__b)&&m(r);e:if(typeof P=="function")try{if(k=r.props,d="prototype"in P&&P.prototype.render,g=(m=P.contextType)&&a[m.__c],E=m?g?g.props.value:m.__:a,s.__c?C=(i=r.__c=s.__c).__=i.__E:(d?r.__c=i=new P(k,E):(r.__c=i=new W(k,E),i.constructor=P,i.render=mt),g&&g.sub(i),i.state||(i.state={}),i.__n=a,f=i.__d=!0,i.__h=[],i._sb=[]),d&&i.__s==null&&(i.__s=i.state),d&&P.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=R({},i.__s)),R(i.__s,P.getDerivedStateFromProps(k,i.__s))),x=i.props,_=i.state,i.__v=r,f)d&&P.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),d&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(d&&P.getDerivedStateFromProps==null&&k!==x&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(k,E),r.__v==s.__v||!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(k,i.__s,E)===!1){for(r.__v!=s.__v&&(i.props=k,i.state=i.__s,i.__d=!1),r.__e=s.__e,r.__k=s.__k,r.__k.some(function(D){D&&(D.__=r)}),M=0;M<i._sb.length;M++)i.__h.push(i._sb[M]);i._sb=[],i.__h.length&&o.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(k,i.__s,E),d&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(x,_,S)})}if(i.context=E,i.props=k,i.__P=t,i.__e=!1,b=$.__r,c=0,d){for(i.state=i.__s,i.__d=!1,b&&b(r),m=i.render(i.props,i.state,i.context),w=0;w<i._sb.length;w++)i.__h.push(i._sb[w]);i._sb=[]}else do i.__d=!1,b&&b(r),m=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++c<25);i.state=i.__s,i.getChildContext!=null&&(a=R(R({},a),i.getChildContext())),d&&!f&&i.getSnapshotBeforeUpdate!=null&&(S=i.getSnapshotBeforeUpdate(x,_)),A=m,m!=null&&m.type===Z&&m.key==null&&(A=Ye(m.props.children)),u=Ge(t,Y(A)?A:[A],r,s,a,l,n,o,u,p,h),i.base=r.__e,r.__u&=-161,i.__h.length&&o.push(i),C&&(i.__E=i.__=null)}catch(D){if(r.__v=null,p||n!=null)if(D.then){for(r.__u|=p?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;n[n.indexOf(u)]=null,r.__e=u}else{for(y=n.length;y--;)_e(n[y]);fe(r)}else r.__e=s.__e,r.__k=s.__k,D.then||fe(r);$.__e(D,r,s)}else n==null&&r.__v==s.__v?(r.__k=s.__k,r.__e=s.__e):u=r.__e=pt(s.__e,r,s,a,l,n,o,p,h);return(m=$.diffed)&&m(r),128&r.__u?void 0:u}function fe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(fe)}function Xe(t,r,s){for(var a=0;a<s.length;a++)we(s[a],s[++a],s[++a]);$.__c&&$.__c(r,t),t.some(function(l){try{t=l.__h,l.__h=[],t.some(function(n){n.call(l)})}catch(n){$.__e(n,l.__v)}})}function Ye(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Y(t)?t.map(Ye):R({},t)}function pt(t,r,s,a,l,n,o,u,p){var h,m,i,f,x,_,S,C=s.props||G,k=r.props,d=r.type;if(d=="svg"?l="http://www.w3.org/2000/svg":d=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),n!=null){for(h=0;h<n.length;h++)if((x=n[h])&&"setAttribute"in x==!!d&&(d?x.localName==d:x.nodeType==3)){t=x,n[h]=null;break}}if(t==null){if(d==null)return document.createTextNode(k);t=document.createElementNS(l,d,k.is&&k),u&&($.__m&&$.__m(r,n),u=!1),n=null}if(d==null)C===k||u&&t.data==k||(t.data=k);else{if(n=n&&X.call(t.childNodes),!u&&n!=null)for(C={},h=0;h<t.attributes.length;h++)C[(x=t.attributes[h]).name]=x.value;for(h in C)if(x=C[h],h!="children"){if(h=="dangerouslySetInnerHTML")i=x;else if(!(h in k)){if(h=="value"&&"defaultValue"in k||h=="checked"&&"defaultChecked"in k)continue;te(t,h,null,x,l)}}for(h in k)x=k[h],h=="children"?f=x:h=="dangerouslySetInnerHTML"?m=x:h=="value"?_=x:h=="checked"?S=x:u&&typeof x!="function"||C[h]===x||te(t,h,x,C[h],l);if(m)u||i&&(m.__html==i.__html||m.__html==t.innerHTML)||(t.innerHTML=m.__html),r.__k=[];else if(i&&(t.innerHTML=""),Ge(r.type=="template"?t.content:t,Y(f)?f:[f],r,s,a,d=="foreignObject"?"http://www.w3.org/1999/xhtml":l,n,o,n?n[0]:s.__k&&K(s,0),u,p),n!=null)for(h=n.length;h--;)_e(n[h]);u||(h="value",d=="progress"&&_==null?t.removeAttribute("value"):_!=null&&(_!==t[h]||d=="progress"&&!_||d=="option"&&_!=C[h])&&te(t,h,_,C[h],l),h="checked",S!=null&&S!=t[h]&&te(t,h,S,C[h],l))}return t}function we(t,r,s){try{if(typeof t=="function"){var a=typeof t.__u=="function";a&&t.__u(),a&&r==null||(t.__u=t(r))}else t.current=r}catch(l){$.__e(l,s)}}function Ze(t,r,s){var a,l;if($.unmount&&$.unmount(t),(a=t.ref)&&(a.current&&a.current!=t.__e||we(a,null,r)),(a=t.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(n){$.__e(n,r)}a.base=a.__P=null}if(a=t.__k)for(l=0;l<a.length;l++)a[l]&&Ze(a[l],r,s||typeof t.type!="function");s||_e(t.__e),t.__c=t.__=t.__e=void 0}function mt(t,r,s){return this.constructor(t,s)}function ft(t,r,s){var a,l,n,o;r==document&&(r=document.documentElement),$.__&&$.__(t,r),l=(a=!1)?null:r.__k,n=[],o=[],ge(r,t=r.__k=ye(Z,null,[t]),l||G,G,r.namespaceURI,l?null:r.firstChild?X.call(r.childNodes):null,n,l?l.__e:r.firstChild,a,o),Xe(n,t,o)}function xt(t,r,s){var a,l,n,o,u=R({},t.props);for(n in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),r)n=="key"?a=r[n]:n=="ref"?l=r[n]:u[n]=r[n]===void 0&&o!=null?o[n]:r[n];return arguments.length>2&&(u.children=arguments.length>3?X.call(arguments,2):s),q(t.type,u,a||t.key,l||t.ref,null)}function bt(t){function r(s){var a,l;return this.getChildContext||(a=new Set,(l={})[r.__c]=this,this.getChildContext=function(){return l},this.componentWillUnmount=function(){a=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&a.forEach(function(o){o.__e=!0,pe(o)})},this.sub=function(n){a.add(n);var o=n.componentWillUnmount;n.componentWillUnmount=function(){a&&a.delete(n),o&&o.call(n)}}),s.children}return r.__c="__cC"+qe++,r.__=t,r.Provider=r.__l=(r.Consumer=function(s,a){return s.children(a)}).contextType=r,r}X=We.slice,$={__e:function(t,r,s,a){for(var l,n,o;r=r.__;)if((l=r.__c)&&!l.__)try{if((n=l.constructor)&&n.getDerivedStateFromError!=null&&(l.setState(n.getDerivedStateFromError(t)),o=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(t,a||{}),o=l.__d),o)return l.__E=l}catch(u){t=u}throw t}},Ue=0,W.prototype.setState=function(t,r){var s;s=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=R({},this.state),typeof t=="function"&&(t=t(R({},s),this.props)),t&&R(s,t),t!=null&&this.__v&&(r&&this._sb.push(r),pe(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),pe(this))},W.prototype.render=Z,N=[],Oe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ke=function(t,r){return t.__v.__b-r.__v.__b},ae.__r=0,Ve=/(PointerCapture)$|Capture$/i,ve=0,ue=$e(!1),he=$e(!0),qe=0;var vt=0;function e(t,r,s,a,l,n){r||(r={});var o,u,p=r;if("ref"in p)for(u in p={},r)u=="ref"?o=r[u]:p[u]=r[u];var h={type:t,props:p,key:s,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--vt,__i:-1,__u:0,__source:l,__self:n};if(typeof t=="function"&&(o=t.defaultProps))for(u in o)p[u]===void 0&&(p[u]=o[u]);return $.vnode&&$.vnode(h),h}var J,z,de,Ae,le=0,et=[],I=$,Me=I.__b,Te=I.__r,ze=I.diffed,Ee=I.__c,Ie=I.unmount,Le=I.__;function ke(t,r){I.__h&&I.__h(z,t,le||r),le=0;var s=z.__H||(z.__H={__:[],__h:[]});return t>=s.__.length&&s.__.push({}),s.__[t]}function v(t){return le=1,_t(rt,t)}function _t(t,r,s){var a=ke(J++,2);if(a.t=t,!a.__c&&(a.__=[rt(void 0,r),function(u){var p=a.__N?a.__N[0]:a.__[0],h=a.t(p,u);p!==h&&(a.__N=[h,a.__[1]],a.__c.setState({}))}],a.__c=z,!z.__f)){var l=function(u,p,h){if(!a.__c.__H)return!0;var m=a.__c.__H.__.filter(function(f){return!!f.__c});if(m.every(function(f){return!f.__N}))return!n||n.call(this,u,p,h);var i=a.__c.props!==u;return m.forEach(function(f){if(f.__N){var x=f.__[0];f.__=f.__N,f.__N=void 0,x!==f.__[0]&&(i=!0)}}),n&&n.call(this,u,p,h)||i};z.__f=!0;var n=z.shouldComponentUpdate,o=z.componentWillUpdate;z.componentWillUpdate=function(u,p,h){if(this.__e){var m=n;n=void 0,l(u,p,h),n=m}o&&o.call(this,u,p,h)},z.shouldComponentUpdate=l}return a.__N||a.__}function H(t,r){var s=ke(J++,3);!I.__s&&tt(s.__H,r)&&(s.__=t,s.u=r,z.__H.__h.push(s))}function yt(t){return le=5,gt(function(){return{current:t}},[])}function gt(t,r){var s=ke(J++,7);return tt(s.__H,r)&&(s.__=t(),s.__H=r,s.__h=t),s.__}function wt(){for(var t;t=et.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ne),t.__H.__h.forEach(xe),t.__H.__h=[]}catch(r){t.__H.__h=[],I.__e(r,t.__v)}}I.__b=function(t){z=null,Me&&Me(t)},I.__=function(t,r){t&&r.__k&&r.__k.__m&&(t.__m=r.__k.__m),Le&&Le(t,r)},I.__r=function(t){Te&&Te(t),J=0;var r=(z=t.__c).__H;r&&(de===z?(r.__h=[],z.__h=[],r.__.forEach(function(s){s.__N&&(s.__=s.__N),s.u=s.__N=void 0})):(r.__h.forEach(ne),r.__h.forEach(xe),r.__h=[],J=0)),de=z},I.diffed=function(t){ze&&ze(t);var r=t.__c;r&&r.__H&&(r.__H.__h.length&&(et.push(r)!==1&&Ae===I.requestAnimationFrame||((Ae=I.requestAnimationFrame)||kt)(wt)),r.__H.__.forEach(function(s){s.u&&(s.__H=s.u),s.u=void 0})),de=z=null},I.__c=function(t,r){r.some(function(s){try{s.__h.forEach(ne),s.__h=s.__h.filter(function(a){return!a.__||xe(a)})}catch(a){r.some(function(l){l.__h&&(l.__h=[])}),r=[],I.__e(a,s.__v)}}),Ee&&Ee(t,r)},I.unmount=function(t){Ie&&Ie(t);var r,s=t.__c;s&&s.__H&&(s.__H.__.forEach(function(a){try{ne(a)}catch(l){r=l}}),s.__H=void 0,r&&I.__e(r,s.__v))};var He=typeof requestAnimationFrame=="function";function kt(t){var r,s=function(){clearTimeout(a),He&&cancelAnimationFrame(r),setTimeout(t)},a=setTimeout(s,35);He&&(r=requestAnimationFrame(s))}function ne(t){var r=z,s=t.__c;typeof s=="function"&&(t.__c=void 0,s()),z=r}function xe(t){var r=z;t.__c=t.__(),z=r}function tt(t,r){return!t||t.length!==r.length||r.some(function(s,a){return s!==t[a]})}function rt(t,r){return typeof r=="function"?r(t):r}var Ct={};function re(t,r){for(var s in r)t[s]=r[s];return t}function St(t,r,s){var a,l=/(?:\?([^#]*))?(#.*)?$/,n=t.match(l),o={};if(n&&n[1])for(var u=n[1].split("&"),p=0;p<u.length;p++){var h=u[p].split("=");o[decodeURIComponent(h[0])]=decodeURIComponent(h.slice(1).join("="))}t=be(t.replace(l,"")),r=be(r||"");for(var m=Math.max(t.length,r.length),i=0;i<m;i++)if(r[i]&&r[i].charAt(0)===":"){var f=r[i].replace(/(^:|[+*?]+$)/g,""),x=(r[i].match(/[+*?]+$/)||Ct)[0]||"",_=~x.indexOf("+"),S=~x.indexOf("*"),C=t[i]||"";if(!C&&!S&&(x.indexOf("?")<0||_)){a=!1;break}if(o[f]=decodeURIComponent(C),_||S){o[f]=t.slice(i).map(decodeURIComponent).join("/");break}}else if(r[i]!==t[i]){a=!1;break}return(s.default===!0||a!==!1)&&o}function Pt(t,r){return t.rank<r.rank?1:t.rank>r.rank?-1:t.index-r.index}function $t(t,r){return t.index=r,t.rank=(function(s){return s.props.default?0:be(s.props.path).map(At).join("")})(t),t.props}function be(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function At(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var Mt={},U=[],De=[],L=null,st={url:Ce()},Tt=bt(st);function Ce(){var t;return""+((t=L&&L.location?L.location:L&&L.getCurrentLocation?L.getCurrentLocation():typeof location<"u"?location:Mt).pathname||"")+(t.search||"")}function Q(t,r){return r===void 0&&(r=!1),typeof t!="string"&&t.url&&(r=t.replace,t=t.url),(function(s){for(var a=U.length;a--;)if(U[a].canRoute(s))return!0;return!1})(t)&&(function(s,a){a===void 0&&(a="push"),L&&L[a]?L[a](s):typeof history<"u"&&history[a+"State"]&&history[a+"State"](null,null,s)})(t,r?"replace":"push"),nt(t)}function nt(t){for(var r=!1,s=0;s<U.length;s++)U[s].routeTo(t)&&(r=!0);return r}function zt(t){if(t&&t.getAttribute){var r=t.getAttribute("href"),s=t.getAttribute("target");if(r&&r.match(/^\//g)&&(!s||s.match(/^_?self$/i)))return Q(r)}}function Et(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function It(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var r=t.target;do if(r.localName==="a"&&r.getAttribute("href")){if(r.hasAttribute("data-native")||r.hasAttribute("native"))return;if(zt(r))return Et(t)}while(r=r.parentNode)}}var Re=!1;function at(t){t.history&&(L=t.history),this.state={url:t.url||Ce()}}re(at.prototype=new W,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var r=me(this.props.children);return this.g(r,t)!==void 0},routeTo:function(t){this.setState({url:t});var r=this.canRoute(t);return this.p||this.forceUpdate(),r},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;Re||(Re=!0,L||addEventListener("popstate",function(){nt(Ce())}),addEventListener("click",It)),U.push(this),L&&(this.u=L.listen(function(r){var s=r.location||r;t.routeTo(""+(s.pathname||"")+(s.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),U.splice(U.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,r){t=t.filter($t).sort(Pt);for(var s=0;s<t.length;s++){var a=t[s],l=St(r,a.props.path,a.props);if(l)return[a,l]}},render:function(t,r){var s,a,l=t.onChange,n=r.url,o=this.c,u=this.g(me(t.children),n);if(u&&(a=xt(u[0],re(re({url:n,matches:s=u[1]},s),{key:void 0,ref:void 0}))),n!==(o&&o.url)){re(st,o=this.c={url:n,previous:o&&o.url,current:a,path:a?a.props.path:null,matches:s}),o.router=this,o.active=a?[a]:[];for(var p=De.length;p--;)De[p]({});typeof l=="function"&&l(o)}return ye(Tt.Provider,{value:o},a)}});var B=function(t){return ye(t.component,t)};const Lt=[{path:"/",label:"Dashboard",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})},{path:"/services",label:"Services",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})},{path:"/schema",label:"Schema",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})})},{path:"/api-explorer",label:"API Explorer",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})})},{path:"/roles",label:"Roles",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})},{path:"/api-keys",label:"API Keys",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z","clip-rule":"evenodd"})})},{path:"/settings",label:"Settings",icon:t=>e("svg",{class:t.class,viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})})}];function Ht({currentPath:t,isOpen:r,onClose:s}){return e("aside",{class:`
        fixed lg:static inset-y-0 left-0 z-40
        w-64 bg-surface-raised border-r border-border-subtle
        flex flex-col
        transition-transform duration-200 ease-out
        ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[e("div",{class:"flex items-center gap-3 px-5 h-16 border-b border-border-subtle shrink-0",children:[e("div",{class:"w-8 h-8 rounded-lg bg-gradient-to-br from-brand to-cyan-accent flex items-center justify-center",children:e("svg",{class:"w-4 h-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})}),e("div",{children:[e("span",{class:"text-base font-semibold text-text-primary tracking-tight",children:"Faucet"}),e("span",{class:"text-xs text-text-muted ml-2",children:"Admin"})]})]}),e("nav",{class:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:Lt.map(a=>{const l=t===a.path||a.path!=="/"&&t.startsWith(a.path);return e("a",{href:a.path,onClick:n=>{},class:`
                flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium
                transition-colors duration-150 group
                ${l?"bg-brand/10 text-brand":"text-text-secondary hover:text-text-primary hover:bg-surface-overlay"}
              `,children:[e(a.icon,{class:`w-5 h-5 shrink-0 ${l?"text-brand":"text-text-muted group-hover:text-text-secondary"}`}),a.label,l&&e("div",{class:"ml-auto w-1.5 h-1.5 rounded-full bg-brand"})]},a.path)})}),e("div",{class:"px-5 py-4 border-t border-border-subtle",children:e("div",{class:"flex items-center gap-2 text-xs text-text-muted",children:[e("div",{class:"w-2 h-2 rounded-full bg-success animate-pulse"}),e("span",{children:"Faucet v0.1.0"})]})})]})}function Dt({onMenuClick:t,onLogout:r}){return e("header",{class:"h-16 border-b border-border-subtle bg-surface-raised/80 backdrop-blur-sm flex items-center justify-between px-4 lg:px-6 shrink-0 z-20",children:[e("div",{class:"flex items-center gap-3",children:[e("button",{onClick:t,class:"lg:hidden p-2 rounded-lg text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors","aria-label":"Toggle menu",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})})}),e("div",{class:"hidden sm:flex items-center gap-2 text-sm text-text-muted",children:[e("kbd",{class:"px-2 py-0.5 rounded bg-surface-overlay border border-border-default text-xs font-mono",children:"/"}),e("span",{children:"Quick search..."})]})]}),e("div",{class:"flex items-center gap-3",children:[e("a",{href:"/healthz",target:"_blank",class:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors",children:[e("div",{class:"w-2 h-2 rounded-full bg-success"}),e("span",{class:"hidden sm:inline",children:"Healthy"})]}),e("a",{href:"/openapi.json",target:"_blank",class:"p-2 rounded-lg text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors",title:"OpenAPI Spec",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z","clip-rule":"evenodd"})})}),r&&e("button",{onClick:r,class:"p-2 rounded-lg text-text-secondary hover:text-text-primary hover:bg-surface-overlay transition-colors",title:"Sign out",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})})}),e("div",{class:"w-8 h-8 rounded-full bg-gradient-to-br from-brand to-cyan-accent flex items-center justify-center text-xs font-bold text-white",children:"A"})]})]})}const je={healthy:{color:"text-success",bg:"bg-success/10",dot:"bg-success"},active:{color:"text-success",bg:"bg-success/10",dot:"bg-success"},degraded:{color:"text-warning",bg:"bg-warning/10",dot:"bg-warning"},error:{color:"text-error",bg:"bg-error/10",dot:"bg-error"},inactive:{color:"text-text-muted",bg:"bg-surface-overlay",dot:"bg-text-muted"},unknown:{color:"text-text-muted",bg:"bg-surface-overlay",dot:"bg-text-muted"}};function ie({status:t,label:r}){const s=je[t]||je.unknown,a=r||t.charAt(0).toUpperCase()+t.slice(1);return e("span",{class:`badge ${s.bg} ${s.color}`,children:[e("span",{class:`w-1.5 h-1.5 rounded-full ${s.dot} mr-1.5`}),a]})}const Rt="";function jt(){const t={"Content-Type":"application/json"},r=localStorage.getItem("faucet_api_key");r&&(t["X-API-Key"]=r);const s=localStorage.getItem("faucet_session");return s&&(t.Authorization=`Bearer ${s}`),t}async function T(t,r={}){const{method:s="GET",body:a,headers:l={}}=r,n=await fetch(`${Rt}${t}`,{method:s,headers:{...jt(),...l},body:a?JSON.stringify(a):void 0});if(!n.ok){let o=`HTTP ${n.status}`;try{const u=await n.json();u.error?.message&&(o=u.error.message)}catch{o=`${n.status} ${n.statusText}`}throw new Error(o)}if(n.status!==204)return n.json()}function Bt(){const[t,r]=v([]),[s,a]=v(0),[l,n]=v(0),[o,u]=v(!0);H(()=>{p()},[]);async function p(){u(!0);try{const[m,i,f]=await Promise.allSettled([T("/api/v1/system/service"),T("/api/v1/system/api-key"),T("/api/v1/system/role")]);m.status==="fulfilled"&&r(m.value.resource||[]),i.status==="fulfilled"&&a((i.value.resource||[]).length),f.status==="fulfilled"&&n((f.value.resource||[]).length)}catch{}finally{u(!1)}}function h({label:m,value:i,icon:f,accent:x}){return e("div",{class:"card group hover:border-border-default transition-colors duration-200",children:e("div",{class:"flex items-start justify-between",children:[e("div",{children:[e("p",{class:"text-sm text-text-secondary mb-1",children:m}),e("p",{class:`text-2xl font-semibold font-mono ${x||"text-text-primary"}`,children:i})]}),e("div",{class:"p-2 rounded-lg bg-surface-overlay text-text-muted group-hover:text-brand transition-colors",children:f})]})})}return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Dashboard"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Overview of your Faucet instance"})]}),e("div",{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e(h,{label:"Connected Databases",value:t.length,accent:"text-brand",icon:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})}),e(h,{label:"API Keys",value:s,icon:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z","clip-rule":"evenodd"})})}),e(h,{label:"Roles",value:l,icon:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e("div",{class:"lg:col-span-2 card",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h2",{class:"text-base font-semibold text-text-primary",children:"Connected Databases"}),e("a",{href:"/services",class:"text-xs text-brand hover:text-brand-light transition-colors",children:"View all →"})]}),o?e("div",{class:"space-y-3",children:[1,2,3].map(m=>e("div",{class:"h-14 bg-surface-overlay rounded-lg animate-pulse"},m))}):t.length===0?e("div",{class:"text-center py-8",children:[e("div",{class:"text-text-muted mb-3",children:e("svg",{class:"w-10 h-10 mx-auto",viewBox:"0 0 20 20",fill:"currentColor",opacity:"0.3",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})}),e("p",{class:"text-sm text-text-muted mb-3",children:"No services connected yet"}),e("a",{href:"/services",class:"btn-primary text-sm inline-block",children:"Add Service"})]}):e("div",{class:"space-y-2",children:t.map(m=>e("div",{class:"flex items-center justify-between p-3 rounded-lg bg-surface hover:bg-surface-overlay transition-colors",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-8 h-8 rounded-lg bg-brand/10 flex items-center justify-center",children:e("span",{class:"text-xs font-bold text-brand uppercase",children:m.driver.slice(0,2)})}),e("div",{children:[e("p",{class:"text-sm font-medium text-text-primary",children:m.name}),e("p",{class:"text-xs text-text-muted",children:m.driver})]})]}),e(ie,{status:m.active?"active":"inactive"})]},m.name))})]}),e("div",{class:"card",children:[e("h2",{class:"text-base font-semibold text-text-primary mb-4",children:"Quick Actions"}),e("div",{class:"space-y-2",children:[{label:"Add Database",href:"/services",icon:"+"},{label:"Explore Schema",href:"/schema",icon:"#"},{label:"Test API",href:"/api-explorer",icon:">"},{label:"Create API Key",href:"/api-keys",icon:"*"},{label:"Manage Roles",href:"/roles",icon:"@"}].map(m=>e("a",{href:m.href,class:"flex items-center gap-3 p-3 rounded-lg hover:bg-surface-overlay text-text-secondary hover:text-text-primary transition-colors group",children:[e("span",{class:"w-8 h-8 rounded-lg bg-surface-overlay flex items-center justify-center font-mono text-sm text-text-muted group-hover:text-brand group-hover:bg-brand/10 transition-colors",children:m.icon}),e("span",{class:"text-sm font-medium",children:m.label}),e("svg",{class:"w-4 h-4 ml-auto text-text-muted group-hover:text-text-secondary transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})})]},m.label))})]})]})]})}function oe({isOpen:t,onClose:r,title:s,children:a,width:l="max-w-lg"}){const n=yt(null);return H(()=>{const o=u=>{u.key==="Escape"&&r()};return t&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow=""}},[t,r]),t?e("div",{ref:n,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:o=>{o.target===n.current&&r()},children:e("div",{class:`${l} w-full bg-surface-raised border border-border-subtle rounded-xl shadow-2xl animate-scale-in`,children:[e("div",{class:"flex items-center justify-between px-6 py-4 border-b border-border-subtle",children:[e("h2",{class:"text-lg font-semibold text-text-primary",children:s}),e("button",{onClick:r,class:"p-1.5 rounded-lg text-text-muted hover:text-text-primary hover:bg-surface-overlay transition-colors",children:e("svg",{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})})]}),e("div",{class:"px-6 py-4 max-h-[70vh] overflow-y-auto",children:a})]})}):null}const Ft=[{value:"postgres",label:"PostgreSQL"},{value:"mysql",label:"MySQL"},{value:"mssql",label:"SQL Server"},{value:"snowflake",label:"Snowflake"}],Be={name:"",driver:"postgres",dsn:"",schema:""};function Nt(){const[t,r]=v([]),[s,a]=v(!0),[l,n]=v(!1),[o,u]=v({...Be}),[p,h]=v(!1),[m,i]=v(null),[f,x]=v(null),[_,S]=v({});H(()=>{C()},[]);async function C(){a(!0);try{const c=await T("/api/v1/system/service");r(c.resource||[])}catch{r([])}finally{a(!1)}}function k(){u({...Be}),i(null),n(!0)}async function d(c){x(c);try{await T(`/api/v1/system/service/${c}/test`),S({..._,[c]:{ok:!0,message:"Connection successful"}})}catch(w){S({..._,[c]:{ok:!1,message:w instanceof Error?w.message:"Connection failed"}})}finally{x(null)}}async function g(){h(!0),i(null);try{const c={name:o.name,driver:o.driver,dsn:o.dsn};o.schema&&(c.schema=o.schema);const w=await T("/api/v1/system/service",{method:"POST",body:c});n(!1),await C(),w?.connection_warning&&S({..._,[o.name]:{ok:!1,message:w.connection_warning}})}catch(c){i(c instanceof Error?c.message:"Failed to save service")}finally{h(!1)}}async function E(c){if(confirm(`Delete service "${c}"? This cannot be undone.`))try{await T(`/api/v1/system/service/${c}`,{method:"DELETE"}),C()}catch{}}function M(c){switch(c){case"postgres":return"postgres://user:pass@localhost:5432/dbname?sslmode=disable";case"mysql":return"user:pass@tcp(host:3306)/dbname";case"mssql":return"sqlserver://user:pass@localhost:1433?database=dbname";case"snowflake":return"user:pass@account/dbname/schema?warehouse=wh";default:return""}}function b(c){switch(c){case"mysql":return"Format: user:pass@tcp(host:port)/dbname — the tcp() wrapper is required";case"postgres":return"Format: postgres://user:pass@host:port/dbname?sslmode=disable";case"mssql":return"Format: sqlserver://user:pass@host:port?database=dbname";default:return"Full connection string for the database"}}return e("div",{class:"space-y-6",children:[e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Services"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Manage database connections"})]}),e("button",{onClick:k,class:"btn-primary flex items-center gap-2",children:[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})}),"Add Service"]})]}),s?e("div",{class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[1,2,3].map(c=>e("div",{class:"card animate-pulse",children:[e("div",{class:"h-4 bg-surface-overlay rounded w-1/2 mb-4"}),e("div",{class:"h-3 bg-surface-overlay rounded w-3/4 mb-2"}),e("div",{class:"h-3 bg-surface-overlay rounded w-1/3"})]},c))}):t.length===0?e("div",{class:"card text-center py-16",children:[e("div",{class:"text-text-muted mb-4",children:e("svg",{class:"w-12 h-12 mx-auto",viewBox:"0 0 20 20",fill:"currentColor",opacity:"0.3",children:[e("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),e("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),e("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})}),e("h3",{class:"text-lg font-medium text-text-primary mb-2",children:"No services connected"}),e("p",{class:"text-sm text-text-secondary mb-6",children:"Add a database connection to start generating REST APIs."}),e("button",{onClick:k,class:"btn-primary",children:"Add Your First Service"})]}):e("div",{class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(c=>e("div",{class:"card group hover:border-border-default transition-colors",children:[e("div",{class:"flex items-start justify-between mb-3",children:[e("div",{class:"flex items-center gap-3",children:[e("div",{class:"w-10 h-10 rounded-lg bg-brand/10 flex items-center justify-center shrink-0",children:e("span",{class:"text-sm font-bold text-brand uppercase",children:c.driver.slice(0,2)})}),e("div",{children:[e("h3",{class:"text-sm font-semibold text-text-primary",children:c.name}),e("p",{class:"text-xs text-text-muted",children:c.driver})]})]}),e(ie,{status:c.is_active?"active":"inactive"})]}),c.schema&&e("div",{class:"text-xs font-mono text-text-secondary mb-3",children:[e("span",{class:"text-text-muted",children:"schema:"})," ",c.schema]}),_[c.name]&&e("div",{class:`text-xs p-2 rounded mb-3 ${_[c.name].ok?"bg-success/10 text-success":"bg-error/10 text-error"}`,children:_[c.name].message}),e("div",{class:"flex items-center gap-2 pt-3 border-t border-border-subtle",children:[e("button",{onClick:()=>d(c.name),disabled:f===c.name,class:"btn-ghost text-xs py-1.5 px-3",children:f===c.name?"Testing...":"Test"}),e("a",{href:`/schema?service=${c.name}`,class:"btn-ghost text-xs py-1.5 px-3",children:"Schema"}),e("button",{onClick:()=>E(c.name),class:"btn-ghost text-xs py-1.5 px-3 text-error hover:text-error ml-auto",children:"Delete"})]})]},c.name))}),e(oe,{isOpen:l,onClose:()=>n(!1),title:"Add Service",width:"max-w-xl",children:e("div",{class:"space-y-4",children:[m&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:m}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Service Name"}),e("input",{type:"text",class:"input w-full",placeholder:"my-database",value:o.name,onInput:c=>u({...o,name:c.target.value})}),e("p",{class:"text-xs text-text-muted mt-1",children:"Unique identifier used in API URLs (e.g. /api/v1/my-database/_table/...)"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Database Driver"}),e("div",{class:"grid grid-cols-2 gap-2",children:Ft.map(c=>e("button",{onClick:()=>u({...o,driver:c.value}),class:`
                    p-3 rounded-lg border text-left text-sm font-medium transition-colors
                    ${o.driver===c.value?"border-brand bg-brand/10 text-brand":"border-border-default bg-surface hover:bg-surface-overlay text-text-secondary"}
                  `,children:c.label},c.value))})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"DSN (Connection String)"}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:M(o.driver),value:o.dsn,onInput:c=>u({...o,dsn:c.target.value})}),e("p",{class:"text-xs text-text-muted mt-1",children:b(o.driver)})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:["Schema ",e("span",{class:"text-text-muted font-normal",children:"(optional)"})]}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:"public",value:o.schema,onInput:c=>u({...o,schema:c.target.value})}),e("p",{class:"text-xs text-text-muted mt-1",children:"Database schema to use (defaults to driver default)"})]}),e("div",{class:"flex items-center justify-end gap-2 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>n(!1),class:"btn-ghost text-sm",children:"Cancel"}),e("button",{onClick:g,disabled:p||!o.name||!o.dsn,class:"btn-primary text-sm",children:p?"Saving...":"Add Service"})]})]})})]})}function Ut(){const[t,r]=v([]),[s,a]=v(""),[l,n]=v([]),[o,u]=v(""),[p,h]=v([]),[m,i]=v(!1),[f,x]=v(!1),[_,S]=v("");H(()=>{T("/api/v1/system/service").then(d=>{const g=(d.resource||[]).map(b=>({name:b.name,driver:b.driver}));r(g);const M=new URLSearchParams(window.location.search).get("service");M&&g.find(b=>b.name===M)?a(M):g.length>0&&a(g[0].name)}).catch(()=>r([]))},[]),H(()=>{s&&(i(!0),u(""),h([]),T(`/api/v1/${s}/_schema`).then(d=>{const E=(d.resource||d.tables||[]).map(M=>typeof M=="string"?{name:M}:{name:M.name,type:M.type});n(E)}).catch(()=>n([])).finally(()=>i(!1)))},[s]),H(()=>{!s||!o||(x(!0),T(`/api/v1/${s}/_schema/${o}`).then(d=>{const g=d.resource||d.columns||d.fields||[];h(g)}).catch(()=>h([])).finally(()=>x(!1)))},[s,o]);const C=l.filter(d=>d.name.toLowerCase().includes(_.toLowerCase()));function k(d){if(!d)return"text-text-secondary";const g=d.toLowerCase();return g.includes("int")||g.includes("serial")||g.includes("numeric")||g.includes("decimal")||g.includes("float")||g.includes("double")?"text-cyan-accent":g.includes("varchar")||g.includes("text")||g.includes("char")?"text-success":g.includes("bool")?"text-warning":g.includes("timestamp")||g.includes("date")||g.includes("time")?"text-purple-400":g.includes("json")||g.includes("jsonb")?"text-orange-400":g.includes("uuid")?"text-pink-400":"text-text-secondary"}return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Schema Explorer"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Browse tables, columns, and relationships"})]}),e("div",{class:"flex items-center gap-4",children:e("select",{class:"input w-64",value:s,onChange:d=>a(d.target.value),children:[e("option",{value:"",children:"Select a service..."}),t.map(d=>e("option",{value:d.name,children:[d.name," (",d.driver,")"]},d.name))]})}),e("div",{class:"grid grid-cols-1 lg:grid-cols-12 gap-6 min-h-[60vh]",children:[e("div",{class:"lg:col-span-4 xl:col-span-3",children:e("div",{class:"card p-0 h-full flex flex-col",children:[e("div",{class:"p-3 border-b border-border-subtle",children:e("input",{type:"text",class:"input w-full text-sm",placeholder:"Filter tables...",value:_,onInput:d=>S(d.target.value)})}),e("div",{class:"flex-1 overflow-y-auto",children:m?e("div",{class:"p-4 space-y-2",children:[1,2,3,4,5].map(d=>e("div",{class:"h-8 bg-surface-overlay rounded animate-pulse"},d))}):C.length===0?e("div",{class:"p-4 text-center text-sm text-text-muted",children:s?"No tables found":"Select a service"}):e("div",{class:"p-1.5",children:C.map(d=>e("button",{onClick:()=>u(d.name),class:`
                        w-full text-left px-3 py-2 rounded-lg text-sm flex items-center justify-between
                        transition-colors duration-100
                        ${o===d.name?"bg-brand/10 text-brand":"text-text-secondary hover:bg-surface-overlay hover:text-text-primary"}
                      `,children:e("span",{class:"flex items-center gap-2 min-w-0",children:[e("svg",{class:"w-4 h-4 shrink-0 text-text-muted",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z","clip-rule":"evenodd"})}),e("span",{class:"truncate font-mono text-xs",children:d.name})]})},d.name))})}),l.length>0&&e("div",{class:"px-4 py-2 border-t border-border-subtle text-xs text-text-muted",children:[C.length," of ",l.length," tables"]})]})}),e("div",{class:"lg:col-span-8 xl:col-span-9",children:e("div",{class:"card p-0 h-full",children:o?e(Z,{children:[e("div",{class:"px-6 py-4 border-b border-border-subtle flex items-center justify-between",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary font-mono",children:o}),e("p",{class:"text-xs text-text-muted mt-0.5",children:[p.length," columns",p.some(d=>d.is_primary_key)&&e("span",{children:[" · PK: ",p.filter(d=>d.is_primary_key).map(d=>d.name).join(", ")]})]})]}),e("div",{class:"flex items-center gap-2",children:e("a",{href:`/api-explorer?service=${s}&table=${o}`,class:"btn-secondary text-xs py-1.5",children:"Query →"})})]}),f?e("div",{class:"p-6 space-y-3",children:[1,2,3,4].map(d=>e("div",{class:"h-12 bg-surface-overlay rounded animate-pulse"},d))}):e("div",{class:"overflow-x-auto",children:e("table",{class:"w-full text-sm",children:[e("thead",{children:e("tr",{class:"border-b border-border-subtle",children:[e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Column"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Type"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Nullable"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Default"}),e("th",{class:"text-left px-6 py-3 font-medium text-text-secondary",children:"Constraints"})]})}),e("tbody",{children:p.map(d=>e("tr",{class:"border-b border-border-subtle last:border-0 hover:bg-surface-overlay/50 transition-colors",children:[e("td",{class:"px-6 py-3",children:e("span",{class:"font-mono text-sm text-text-primary flex items-center gap-2",children:[d.is_primary_key&&e("svg",{class:"w-3.5 h-3.5 text-warning shrink-0",viewBox:"0 0 20 20",fill:"currentColor",title:"Primary Key",children:e("path",{"fill-rule":"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z","clip-rule":"evenodd"})}),d.is_foreign_key&&e("svg",{class:"w-3.5 h-3.5 text-brand shrink-0",viewBox:"0 0 20 20",fill:"currentColor",title:"Foreign Key",children:e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})}),d.name]})}),e("td",{class:"px-6 py-3",children:e("span",{class:`font-mono text-xs ${k(d.db_type)}`,children:d.db_type})}),e("td",{class:"px-6 py-3",children:e("span",{class:`text-xs ${d.nullable?"text-text-muted":"text-warning"}`,children:d.nullable?"YES":"NOT NULL"})}),e("td",{class:"px-6 py-3",children:e("span",{class:"font-mono text-xs text-text-muted",children:d.default||"--"})}),e("td",{class:"px-6 py-3",children:e("div",{class:"flex items-center gap-1.5",children:[d.is_primary_key&&e("span",{class:"badge bg-warning/10 text-warning",children:"PK"}),d.is_foreign_key&&d.references&&e("button",{onClick:()=>u(d.references.table),class:"badge bg-brand/10 text-brand hover:bg-brand/20 transition-colors cursor-pointer",children:["FK → ",d.references.table,".",d.references.column]})]})})]},d.name))})]})})]}):e("div",{class:"flex items-center justify-center h-full min-h-[300px] text-text-muted text-sm",children:e("div",{class:"text-center",children:[e("svg",{class:"w-10 h-10 mx-auto mb-3",viewBox:"0 0 20 20",fill:"currentColor",opacity:"0.3",children:e("path",{"fill-rule":"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z","clip-rule":"evenodd"})}),"Select a table to view its schema"]})})})})]})]})}function Ot(t){return t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,r=>{let s="text-cyan-accent";if(/^"/.test(r)){if(/:$/.test(r))return s="text-brand-light",r=r.replace(/:$/,""),`<span class="${s}">${r}</span>:`;s="text-success"}else/true|false/.test(r)?s="text-warning":/null/.test(r)&&(s="text-text-muted");return`<span class="${s}">${r}</span>`})}function Kt({data:t}){const r=JSON.stringify(t,null,2),s=Ot(r);return e("pre",{class:"font-mono text-sm leading-relaxed overflow-auto p-4 bg-surface rounded-lg border border-border-subtle",dangerouslySetInnerHTML:{__html:s}})}function lt({code:t,language:r=""}){const[s,a]=v(!1);return e("div",{class:"relative group rounded-lg border border-border-subtle bg-surface overflow-hidden",children:[r&&e("div",{class:"px-4 py-1.5 border-b border-border-subtle text-xs font-mono text-text-muted bg-surface-raised",children:r}),e("button",{onClick:async()=>{try{await navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)}catch{const n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),a(!0),setTimeout(()=>a(!1),2e3)}},class:`
          absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium
          transition-all duration-150
          ${s?"bg-success/20 text-success":"bg-surface-overlay text-text-muted hover:text-text-primary opacity-0 group-hover:opacity-100"}
        `,children:s?e("span",{class:"flex items-center gap-1",children:[e("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})}),"Copied"]}):e("span",{class:"flex items-center gap-1",children:[e("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),"Copy"]})}),e("pre",{class:"p-4 overflow-x-auto text-sm font-mono leading-relaxed text-text-primary",children:e("code",{children:t})})]})}const Vt=["GET","POST","PUT","PATCH","DELETE"];function qt(){const[t,r]=v("GET"),[s,a]=v("/api/v1/"),[l,n]=v([{key:"Content-Type",value:"application/json",enabled:!0},{key:"X-API-Key",value:"",enabled:!1}]),[o,u]=v(""),[p,h]=v(null),[m,i]=v(!1),[f,x]=v("body"),[_,S]=v("body");H(()=>{const b=new URLSearchParams(window.location.search),c=b.get("service"),w=b.get("table");c&&w?a(`/api/v1/${c}/_table/${w}`):c&&a(`/api/v1/${c}/_table/`)},[]);async function C(){i(!0),h(null);const b=performance.now();try{const c={};l.forEach(F=>{F.enabled&&F.key&&F.value&&(c[F.key]=F.value)});const w=localStorage.getItem("faucet_api_key");w&&!c["X-API-Key"]&&(c["X-API-Key"]=w);const A=localStorage.getItem("faucet_session");A&&!c.Authorization&&(c.Authorization=`Bearer ${A}`);const y={method:t,headers:c};["POST","PUT","PATCH"].includes(t)&&o&&(y.body=o);const P=await fetch(s,y),D=Math.round(performance.now()-b);let j;(P.headers.get("content-type")||"").includes("json")?j=await P.json():j=await P.text();const O={};P.headers.forEach((F,ct)=>{O[ct]=F});const ee=typeof j=="string"?j:JSON.stringify(j),ce=new Blob([ee]).size,it=ce>1024?`${(ce/1024).toFixed(1)} KB`:`${ce} B`;h({status:P.status,statusText:P.statusText,headers:O,body:j,time:D,size:it})}catch(c){const w=Math.round(performance.now()-b);h({status:0,statusText:"Network Error",headers:{},body:{error:c instanceof Error?c.message:"Request failed"},time:w,size:"0 B"})}finally{i(!1)}}function k(){const b=["curl"];return t!=="GET"&&b.push(`-X ${t}`),l.forEach(c=>{c.enabled&&c.key&&c.value&&b.push(`-H '${c.key}: ${c.value}'`)}),["POST","PUT","PATCH"].includes(t)&&o&&b.push(`-d '${o}'`),b.push(`'${window.location.origin}${s}'`),b.join(` \\
  `)}function d(){n([...l,{key:"",value:"",enabled:!0}])}function g(b){n(l.filter((c,w)=>w!==b))}function E(b,c,w){const A=[...l];A[b][c]=w,n(A)}function M(b){return b>=200&&b<300?"text-success":b>=300&&b<400?"text-brand":b>=400&&b<500?"text-warning":"text-error"}return e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"API Explorer"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Test API endpoints interactively"})]}),e("div",{class:"card p-0",children:[e("div",{class:"flex items-center gap-0 border-b border-border-subtle",children:[e("select",{class:"h-12 px-4 bg-transparent border-r border-border-subtle text-sm font-semibold focus:outline-none cursor-pointer",value:t,onChange:b=>r(b.target.value),style:{color:t==="GET"?"#00c853":t==="POST"?"#0066FF":t==="DELETE"?"#ff1744":t==="PUT"?"#ffab00":"#fb923c"},children:Vt.map(b=>e("option",{value:b,children:b},b))}),e("input",{type:"text",class:"flex-1 h-12 px-4 bg-transparent text-sm font-mono text-text-primary placeholder-text-muted focus:outline-none",placeholder:"/api/v1/myservice/_table/users",value:s,onInput:b=>a(b.target.value),onKeyDown:b=>{b.key==="Enter"&&C()}}),e("button",{onClick:C,disabled:m,class:"h-12 px-6 bg-brand text-white text-sm font-semibold hover:bg-brand-light transition-colors disabled:opacity-50 rounded-none rounded-tr-xl",children:m?e("span",{class:"flex items-center gap-2",children:[e("svg",{class:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Sending"]}):"Send"})]}),e("div",{class:"border-b border-border-subtle",children:e("div",{class:"flex",children:["body","headers","curl"].map(b=>e("button",{onClick:()=>x(b),class:`px-4 py-2.5 text-xs font-medium capitalize transition-colors border-b-2 -mb-px ${f===b?"border-brand text-brand":"border-transparent text-text-muted hover:text-text-secondary"}`,children:[b,b==="headers"&&e("span",{class:"ml-1.5 px-1.5 py-0.5 rounded-full text-[10px] bg-surface-overlay",children:l.filter(c=>c.enabled).length})]},b))})}),e("div",{class:"p-4",children:[f==="body"&&e("textarea",{class:"input w-full h-32 font-mono text-sm resize-y",placeholder:`{
  "field": "value"
}`,value:o,onInput:b=>u(b.target.value)}),f==="headers"&&e("div",{class:"space-y-2",children:[l.map((b,c)=>e("div",{class:"flex items-center gap-2",children:[e("input",{type:"checkbox",checked:b.enabled,onChange:w=>E(c,"enabled",w.target.checked),class:"rounded border-border-default bg-surface text-brand focus:ring-brand/50"}),e("input",{type:"text",class:"input flex-1 text-sm font-mono",placeholder:"Header name",value:b.key,onInput:w=>E(c,"key",w.target.value)}),e("input",{type:"text",class:"input flex-1 text-sm font-mono",placeholder:"Value",value:b.value,onInput:w=>E(c,"value",w.target.value)}),e("button",{onClick:()=>g(c),class:"p-2 text-text-muted hover:text-error transition-colors",children:e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})})]},c)),e("button",{onClick:d,class:"btn-ghost text-xs",children:"+ Add Header"})]}),f==="curl"&&e(lt,{code:k(),language:"bash"})]})]}),p&&e("div",{class:"card p-0 animate-fade-in",children:[e("div",{class:"flex items-center justify-between px-4 py-3 border-b border-border-subtle",children:[e("div",{class:"flex items-center gap-4",children:[e("span",{class:`font-mono font-bold text-sm ${M(p.status)}`,children:[p.status," ",p.statusText]}),e("span",{class:`badge ${p.status>=200&&p.status<300?"bg-success/10 text-success":p.status>=400?"bg-error/10 text-error":"bg-warning/10 text-warning"}`,children:p.status>=200&&p.status<300?"Success":p.status>=400?"Error":"Redirect"})]}),e("div",{class:"flex items-center gap-4 text-xs text-text-muted font-mono",children:[e("span",{children:[p.time,"ms"]}),e("span",{children:p.size})]})]}),e("div",{class:"border-b border-border-subtle",children:e("div",{class:"flex",children:["body","headers"].map(b=>e("button",{onClick:()=>S(b),class:`px-4 py-2.5 text-xs font-medium capitalize transition-colors border-b-2 -mb-px ${_===b?"border-brand text-brand":"border-transparent text-text-muted hover:text-text-secondary"}`,children:b},b))})}),e("div",{class:"p-4 max-h-[60vh] overflow-y-auto",children:_==="body"?typeof p.body=="object"?e(Kt,{data:p.body}):e("pre",{class:"font-mono text-sm text-text-primary whitespace-pre-wrap",children:String(p.body)}):e("div",{class:"space-y-1",children:Object.entries(p.headers).map(([b,c])=>e("div",{class:"flex gap-2 text-sm font-mono",children:[e("span",{class:"text-brand-light",children:[b,":"]}),e("span",{class:"text-text-secondary",children:c})]},b))})})]})]})}function ot({columns:t,data:r,keyField:s,emptyMessage:a="No data to display",onRowClick:l}){return r.length===0?e("div",{class:"card text-center py-12",children:e("div",{class:"text-text-muted text-sm",children:a})}):e("div",{class:"overflow-x-auto rounded-xl border border-border-subtle",children:e("table",{class:"w-full text-sm",children:[e("thead",{children:e("tr",{class:"border-b border-border-subtle bg-surface-raised",children:t.map(n=>e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",style:n.width?{width:n.width}:void 0,children:n.header},n.key))})}),e("tbody",{children:r.map(n=>e("tr",{class:`
                border-b border-border-subtle last:border-0
                bg-surface-raised
                ${l?"cursor-pointer hover:bg-surface-overlay":""}
                transition-colors duration-100
              `,onClick:()=>l?.(n),children:t.map(o=>e("td",{class:"px-4 py-3 text-text-primary",children:o.render?o.render(n):String(n[o.key]??"")},o.key))},n[s]))})]})})}const se={service:"*",table:"*",allow_get:!0,allow_post:!1,allow_put:!1,allow_patch:!1,allow_delete:!1};function Wt(){const[t,r]=v([]),[s,a]=v(!0),[l,n]=v(!1),[o,u]=v(null),[p,h]=v({name:"",description:"",is_active:!0,permissions:[{...se}]}),[m,i]=v(!1),[f,x]=v(null);H(()=>{_()},[]);async function _(){a(!0);try{const c=await T("/api/v1/system/role");r(c.resource||[])}catch{r([])}finally{a(!1)}}function S(){h({name:"",description:"",is_active:!0,permissions:[{...se}]}),u(null),x(null),n(!0)}function C(c){h({name:c.name,description:c.description,is_active:c.is_active,permissions:c.permissions.length>0?c.permissions:[{...se}]}),u(c.id),x(null),n(!0)}async function k(){i(!0),x(null);try{o?await T(`/api/v1/system/role/${o}`,{method:"PUT",body:p}):await T("/api/v1/system/role",{method:"POST",body:p}),n(!1),_()}catch(c){x(c instanceof Error?c.message:"Failed to save role")}finally{i(!1)}}async function d(c,w){if(confirm(`Delete role "${w}"?`))try{await T(`/api/v1/system/role/${c}`,{method:"DELETE"}),_()}catch{}}function g(){h({...p,permissions:[...p.permissions,{...se}]})}function E(c){h({...p,permissions:p.permissions.filter((w,A)=>A!==c)})}function M(c,w,A){const y=[...p.permissions];y[c][w]=A,h({...p,permissions:y})}return e("div",{class:"space-y-6",children:[e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Roles"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Manage RBAC roles and permissions"})]}),e("button",{onClick:S,class:"btn-primary flex items-center gap-2",children:[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})}),"Create Role"]})]}),s?e("div",{class:"space-y-3",children:[1,2,3].map(c=>e("div",{class:"h-16 bg-surface-raised rounded-xl border border-border-subtle animate-pulse"},c))}):e(ot,{columns:[{key:"name",header:"Name",render:c=>e("span",{class:"font-semibold text-text-primary",children:c.name})},{key:"description",header:"Description",render:c=>e("span",{class:"text-text-secondary text-sm",children:c.description||"--"})},{key:"permissions",header:"Permissions",render:c=>e("span",{class:"font-mono text-xs text-text-secondary",children:[c.permissions?.length||0," rule",c.permissions?.length!==1?"s":""]})},{key:"is_active",header:"Status",render:c=>e(ie,{status:c.is_active?"active":"inactive"})},{key:"actions",header:"",width:"120px",render:c=>e("div",{class:"flex items-center gap-2 justify-end",children:[e("button",{onClick:w=>{w.stopPropagation(),C(c)},class:"btn-ghost text-xs py-1 px-2",children:"Edit"}),e("button",{onClick:w=>{w.stopPropagation(),d(c.id,c.name)},class:"btn-ghost text-xs py-1 px-2 text-error",children:"Delete"})]})}],data:t,keyField:"id",emptyMessage:"No roles defined. Create a role to control API access.",onRowClick:C}),e(oe,{isOpen:l,onClose:()=>n(!1),title:o?"Edit Role":"Create Role",width:"max-w-2xl",children:e("div",{class:"space-y-6",children:[f&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:f}),e("div",{class:"grid grid-cols-2 gap-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Role Name"}),e("input",{type:"text",class:"input w-full",placeholder:"viewer",value:p.name,onInput:c=>h({...p,name:c.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Status"}),e("select",{class:"input w-full",value:p.is_active?"active":"inactive",onChange:c=>h({...p,is_active:c.target.value==="active"}),children:[e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),e("div",{class:"col-span-2",children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Description"}),e("input",{type:"text",class:"input w-full",placeholder:"Read-only access to all resources",value:p.description,onInput:c=>h({...p,description:c.target.value})})]})]}),e("div",{children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("label",{class:"text-sm font-medium text-text-secondary",children:"Permissions"}),e("button",{onClick:g,class:"btn-ghost text-xs py-1",children:"+ Add Rule"})]}),e("div",{class:"space-y-3",children:p.permissions.map((c,w)=>e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("span",{class:"text-xs font-medium text-text-muted",children:["Rule ",w+1]}),p.permissions.length>1&&e("button",{onClick:()=>E(w),class:"text-xs text-error hover:text-error/80",children:"Remove"})]}),e("div",{class:"grid grid-cols-2 gap-3 mb-3",children:[e("div",{children:[e("label",{class:"block text-xs text-text-muted mb-1",children:"Service"}),e("input",{type:"text",class:"input w-full text-sm font-mono",placeholder:"* (all)",value:c.service,onInput:A=>M(w,"service",A.target.value)})]}),e("div",{children:[e("label",{class:"block text-xs text-text-muted mb-1",children:"Table"}),e("input",{type:"text",class:"input w-full text-sm font-mono",placeholder:"* (all)",value:c.table,onInput:A=>M(w,"table",A.target.value)})]})]}),e("div",{class:"flex flex-wrap gap-3",children:["GET","POST","PUT","PATCH","DELETE"].map(A=>{const y=`allow_${A.toLowerCase()}`;return e("label",{class:"flex items-center gap-1.5 text-xs cursor-pointer",children:[e("input",{type:"checkbox",checked:c[y],onChange:P=>M(w,y,P.target.checked),class:"rounded border-border-default bg-surface text-brand focus:ring-brand/50"}),e("span",{class:"text-text-secondary font-mono",children:A})]},A)})})]},w))})]}),e("div",{class:"flex items-center justify-end gap-2 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>n(!1),class:"btn-ghost text-sm",children:"Cancel"}),e("button",{onClick:k,disabled:m||!p.name,class:"btn-primary text-sm",children:m?"Saving...":o?"Update Role":"Create Role"})]})]})})]})}function Qt(){const[t,r]=v([]),[s,a]=v([]),[l,n]=v(!0),[o,u]=v(!1),[p,h]=v(!1),[m,i]=v(""),[f,x]=v({name:"",role_id:"",expires_in_days:0}),[_,S]=v(!1),[C,k]=v(null);H(()=>{d(),g()},[]);async function d(){n(!0);try{const y=await T("/api/v1/system/api-key");r(y.resource||[])}catch{r([])}finally{n(!1)}}async function g(){try{const y=await T("/api/v1/system/role");a((y.resource||[]).map(P=>({id:P.id,name:P.name})))}catch{a([])}}function E(){x({name:"",role_id:s[0]?.id||"",expires_in_days:0}),k(null),u(!0)}async function M(){S(!0),k(null);try{const y={name:f.name,role_id:f.role_id};f.expires_in_days>0&&(y.expires_in_days=f.expires_in_days);const P=await T("/api/v1/system/api-key",{method:"POST",body:y});u(!1),i(P.key),h(!0),d()}catch(y){k(y instanceof Error?y.message:"Failed to create API key")}finally{S(!1)}}async function b(y,P){if(confirm(`Revoke API key "${P}"? This cannot be undone.`))try{await T(`/api/v1/system/api-key/${y}`,{method:"DELETE"}),d()}catch{}}function c(y){return y?new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"--"}function w(y){if(!y)return"Never";const P=Date.now(),D=new Date(y).getTime(),j=P-D,V=Math.floor(j/6e4);if(V<1)return"Just now";if(V<60)return`${V}m ago`;const O=Math.floor(V/60);if(O<24)return`${O}h ago`;const ee=Math.floor(O/24);return ee<30?`${ee}d ago`:c(y)}return e("div",{class:"space-y-6",children:[e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"API Keys"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Create and manage API access tokens"})]}),e("button",{onClick:E,class:"btn-primary flex items-center gap-2",children:[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})}),"Create API Key"]})]}),e("div",{class:"p-4 rounded-xl border border-border-subtle bg-surface-raised flex items-start gap-3",children:[e("svg",{class:"w-5 h-5 text-brand shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})}),e("div",{class:"text-sm text-text-secondary",children:["API keys authenticate requests to Faucet. Include the key in the",e("code",{class:"px-1.5 py-0.5 rounded bg-surface-overlay font-mono text-xs text-cyan-accent mx-1",children:"X-API-Key"}),"header. Keys are hashed and cannot be retrieved after creation."]})]}),l?e("div",{class:"space-y-3",children:[1,2,3].map(y=>e("div",{class:"h-16 bg-surface-raised rounded-xl border border-border-subtle animate-pulse"},y))}):e(ot,{columns:[{key:"name",header:"Name",render:y=>e("div",{children:[e("span",{class:"font-semibold text-text-primary",children:y.name}),e("span",{class:"text-xs text-text-muted ml-2 font-mono",children:[y.prefix,"..."]})]})},{key:"role_name",header:"Role",render:y=>e("span",{class:"badge bg-brand/10 text-brand",children:y.role_name})},{key:"is_active",header:"Status",render:y=>e(ie,{status:y.is_active?"active":"inactive"})},{key:"last_used_at",header:"Last Used",render:y=>e("span",{class:"text-sm text-text-secondary",children:w(y.last_used_at)})},{key:"expires_at",header:"Expires",render:y=>e("span",{class:"text-sm text-text-secondary",children:y.expires_at?c(y.expires_at):"Never"})},{key:"actions",header:"",width:"80px",render:y=>e("button",{onClick:P=>{P.stopPropagation(),b(y.id,y.name)},class:"btn-danger text-xs py-1 px-3",children:"Revoke"})}],data:t,keyField:"id",emptyMessage:"No API keys created yet. Create one to authenticate API requests."}),e(oe,{isOpen:o,onClose:()=>u(!1),title:"Create API Key",children:e("div",{class:"space-y-4",children:[C&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:C}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Key Name"}),e("input",{type:"text",class:"input w-full",placeholder:"production-backend",value:f.name,onInput:y=>x({...f,name:y.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Role"}),e("select",{class:"input w-full",value:f.role_id,onChange:y=>x({...f,role_id:y.target.value}),children:[e("option",{value:"",children:"Select a role..."}),s.map(y=>e("option",{value:y.id,children:y.name},y.id))]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:["Expires In ",e("span",{class:"text-text-muted font-normal",children:"(0 = never)"})]}),e("div",{class:"flex items-center gap-2",children:[e("input",{type:"number",class:"input w-24 font-mono",min:"0",value:f.expires_in_days,onInput:y=>x({...f,expires_in_days:parseInt(y.target.value)||0})}),e("span",{class:"text-sm text-text-muted",children:"days"})]})]}),e("div",{class:"flex items-center justify-end gap-2 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>u(!1),class:"btn-ghost text-sm",children:"Cancel"}),e("button",{onClick:M,disabled:_||!f.name||!f.role_id,class:"btn-primary text-sm",children:_?"Creating...":"Create Key"})]})]})}),e(oe,{isOpen:p,onClose:()=>h(!1),title:"API Key Created",children:e("div",{class:"space-y-4",children:[e("div",{class:"p-3 rounded-lg bg-warning/10 border border-warning/20 text-sm text-warning",children:"Copy this key now. It will not be shown again."}),e(lt,{code:m}),e("div",{class:"flex justify-end pt-2",children:e("button",{onClick:()=>h(!1),class:"btn-primary text-sm",children:"Done"})})]})})]})}function Gt(){const[t,r]=v([]),[s,a]=v(!0),[l,n]=v("info"),[o,u]=v({current:"",newPass:"",confirm:""}),[p,h]=v(null),[m,i]=v(!1);H(()=>{f()},[]);async function f(){a(!0);try{const _=await T("/api/v1/system/admin");r(_.resource||[])}catch{}finally{a(!1)}}const x=[{id:"info",label:"Server Info",icon:"~"},{id:"admins",label:"Admins",icon:"#"},{id:"about",label:"About",icon:"?"}];return s?e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Settings"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Server configuration"})]}),e("div",{class:"card animate-pulse",children:e("div",{class:"space-y-4",children:[1,2,3,4].map(_=>e("div",{class:"h-10 bg-surface-overlay rounded"},_))})})]}):e("div",{class:"space-y-6",children:[e("div",{children:[e("h1",{class:"text-2xl font-semibold text-text-primary",children:"Settings"}),e("p",{class:"text-sm text-text-secondary mt-1",children:"Server configuration and information"})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e("div",{class:"lg:col-span-1",children:e("nav",{class:"space-y-1",children:x.map(_=>e("button",{onClick:()=>n(_.id),class:`
                  w-full text-left px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2
                  transition-colors duration-150
                  ${l===_.id?"bg-brand/10 text-brand":"text-text-secondary hover:text-text-primary hover:bg-surface-overlay"}
                `,children:[e("span",{class:"w-6 text-center font-mono text-text-muted",children:_.icon}),_.label]},_.id))})}),e("div",{class:"lg:col-span-3",children:[l==="info"&&e("div",{class:"card space-y-6",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Server Information"}),e("p",{class:"text-sm text-text-muted",children:"Current configuration and runtime details"})]}),e("div",{class:"space-y-4",children:[e("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"API Base"}),e("p",{class:"text-sm font-mono text-text-primary",children:"/api/v1"})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Health Endpoint"}),e("p",{class:"text-sm font-mono text-text-primary",children:"/healthz"})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"OpenAPI Spec"}),e("a",{href:"/openapi.json",target:"_blank",class:"text-sm font-mono text-brand hover:text-brand-light",children:"/openapi.json"})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Authentication"}),e("p",{class:"text-sm font-mono text-text-primary",children:"X-API-Key / Bearer JWT"})]})]}),e("div",{class:"p-4 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-2",children:"API Endpoints"}),e("div",{class:"space-y-1.5 font-mono text-xs",children:[e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-success font-semibold w-12",children:"GET"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_schema"]}),e("span",{class:"text-text-muted ml-auto",children:"List tables"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-success font-semibold w-12",children:"GET"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Query records"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-brand font-semibold w-12",children:"POST"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Create records"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-warning font-semibold w-12",children:"PUT"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Replace records"})]}),e("div",{class:"flex items-center gap-2",children:[e("span",{class:"text-error font-semibold w-12",children:"DEL"}),e("span",{class:"text-text-secondary",children:["/api/v1/","{service}","/_table/","{table}"]}),e("span",{class:"text-text-muted ml-auto",children:"Delete records"})]})]})]})]})]}),l==="admins"&&e("div",{class:"card space-y-6",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"Admin Accounts"}),e("p",{class:"text-sm text-text-muted",children:"Manage administrator accounts"})]}),e("div",{class:"overflow-x-auto rounded-lg border border-border-subtle",children:e("table",{class:"w-full text-sm",children:[e("thead",{children:e("tr",{class:"border-b border-border-subtle bg-surface",children:[e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Username"}),e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Email"}),e("th",{class:"text-left px-4 py-3 font-medium text-text-secondary",children:"Created"})]})}),e("tbody",{children:t.length===0?e("tr",{children:e("td",{colSpan:3,class:"px-4 py-8 text-center text-text-muted",children:"No admins found"})}):t.map(_=>e("tr",{class:"border-b border-border-subtle last:border-0",children:[e("td",{class:"px-4 py-3 font-medium text-text-primary",children:_.username}),e("td",{class:"px-4 py-3 text-text-secondary",children:_.email||"--"}),e("td",{class:"px-4 py-3 text-text-secondary text-xs",children:_.created_at?new Date(_.created_at).toLocaleDateString():"--"})]},_.id))})]})})]}),l==="about"&&e("div",{class:"card space-y-6",children:[e("div",{children:[e("h2",{class:"text-base font-semibold text-text-primary mb-1",children:"About Faucet"}),e("p",{class:"text-sm text-text-muted",children:"Open-source database-to-REST API generator"})]}),e("div",{class:"space-y-4",children:[e("div",{class:"flex items-center gap-4 p-4 rounded-lg bg-surface border border-border-subtle",children:[e("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-brand to-cyan-accent flex items-center justify-center shrink-0",children:e("svg",{class:"w-6 h-6 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})}),e("div",{children:[e("p",{class:"text-sm font-semibold text-text-primary",children:"Faucet"}),e("p",{class:"text-xs text-text-muted",children:"Turn any SQL database into a secure REST API. Single binary, zero configuration."})]})]}),e("div",{class:"grid grid-cols-2 gap-4",children:[e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Built With"}),e("p",{class:"text-sm text-text-primary",children:"Go + Chi + sqlx"})]}),e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Frontend"}),e("p",{class:"text-sm text-text-primary",children:"Preact + Tailwind"})]}),e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Supported DBs"}),e("p",{class:"text-sm text-text-primary",children:"PostgreSQL, MySQL, MSSQL, Snowflake"})]}),e("div",{class:"p-3 rounded-lg bg-surface border border-border-subtle",children:[e("p",{class:"text-xs text-text-muted mb-1",children:"Features"}),e("p",{class:"text-sm text-text-primary",children:"RBAC, MCP Server, OpenAPI"})]})]})]})]})]})]})]})}const Jt=[{value:"postgres",label:"PostgreSQL"},{value:"mysql",label:"MySQL"},{value:"mssql",label:"SQL Server"},{value:"snowflake",label:"Snowflake"}];function Fe(){const[t,r]=v("welcome"),[s,a]=v({username:"admin",password:"",confirmPassword:""}),[l,n]=v({name:"",driver:"postgres",dsn:"",schema:""}),[o,u]=v(null),[p,h]=v(!1),[m,i]=v(!1);async function f(){if(s.password!==s.confirmPassword){u("Passwords do not match");return}if(s.password.length<8){u("Password must be at least 8 characters");return}h(!0),u(null);try{const d=await T("/api/v1/system/admin",{method:"POST",body:{username:s.username,password:s.password}});d.session_token&&localStorage.setItem("faucet_session",d.session_token),r("database")}catch(d){u(d instanceof Error?d.message:"Failed to create admin account")}finally{h(!1)}}async function x(){h(!0),u(null);try{const d={name:l.name,driver:l.driver,dsn:l.dsn};l.schema&&(d.schema=l.schema),await T("/api/v1/system/service",{method:"POST",body:d}),r("done")}catch(d){u(d instanceof Error?d.message:"Failed to add database")}finally{h(!1)}}function _(d){switch(d){case"postgres":return"postgres://user:pass@localhost:5432/dbname?sslmode=disable";case"mysql":return"user:pass@tcp(localhost:3306)/dbname";case"mssql":return"sqlserver://user:pass@localhost:1433?database=dbname";case"snowflake":return"user:pass@account/dbname/schema?warehouse=wh";default:return""}}const S=[{key:"welcome",label:"Welcome"},{key:"admin",label:"Admin"},{key:"database",label:"Database"},{key:"done",label:"Done"}],k=["welcome","admin","database","done"].indexOf(t);return e("div",{class:"min-h-[80vh] flex items-center justify-center",children:e("div",{class:"w-full max-w-xl",children:[e("div",{class:"flex items-center justify-center gap-2 mb-8",children:S.map((d,g)=>e("div",{class:"flex items-center gap-2",children:[e("div",{class:`
                  w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold
                  transition-colors
                  ${g<k?"bg-brand text-white":g===k?"bg-brand/20 text-brand border-2 border-brand":"bg-surface-overlay text-text-muted border border-border-default"}
                `,children:g<k?e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})}):g+1}),g<S.length-1&&e("div",{class:`w-12 h-0.5 ${g<k?"bg-brand":"bg-border-default"}`})]},d.key))}),e("div",{class:"card animate-fade-in",children:[t==="welcome"&&e("div",{class:"text-center py-8",children:[e("div",{class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-brand to-cyan-accent flex items-center justify-center mx-auto mb-6",children:e("svg",{class:"w-8 h-8 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})}),e("h1",{class:"text-2xl font-bold text-text-primary mb-3",children:"Welcome to Faucet"}),e("p",{class:"text-text-secondary mb-8 max-w-sm mx-auto",children:"Turn any SQL database into a secure REST API in minutes. Let's get your instance configured."}),e("button",{onClick:()=>r("admin"),class:"btn-primary text-base px-8 py-3",children:"Get Started"})]}),t==="admin"&&e("div",{children:[e("h2",{class:"text-xl font-semibold text-text-primary mb-2",children:"Create Admin Account"}),e("p",{class:"text-sm text-text-secondary mb-6",children:"Set up the administrator account for the Faucet dashboard."}),o&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error mb-4",children:o}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Username"}),e("input",{type:"text",class:"input w-full",value:s.username,onInput:d=>a({...s,username:d.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Password"}),e("input",{type:"password",class:"input w-full",placeholder:"Minimum 8 characters",value:s.password,onInput:d=>a({...s,password:d.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Confirm Password"}),e("input",{type:"password",class:"input w-full",placeholder:"Retype password",value:s.confirmPassword,onInput:d=>a({...s,confirmPassword:d.target.value})})]})]}),e("div",{class:"flex justify-end mt-6 pt-4 border-t border-border-subtle",children:e("button",{onClick:f,disabled:p||!s.password,class:"btn-primary",children:p?"Creating...":"Create Admin & Continue"})})]}),t==="database"&&e("div",{children:[e("h2",{class:"text-xl font-semibold text-text-primary mb-2",children:"Connect a Database"}),e("p",{class:"text-sm text-text-secondary mb-6",children:"Add your first database connection. You can add more later."}),o&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error mb-4",children:o}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Service Name"}),e("input",{type:"text",class:"input w-full",placeholder:"my-database",value:l.name,onInput:d=>n({...l,name:d.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Database Driver"}),e("div",{class:"grid grid-cols-2 gap-2",children:Jt.map(d=>e("button",{onClick:()=>n({...l,driver:d.value}),class:`
                          p-3 rounded-lg border text-left text-sm font-medium transition-colors
                          ${l.driver===d.value?"border-brand bg-brand/10 text-brand":"border-border-default bg-surface hover:bg-surface-overlay text-text-secondary"}
                        `,children:d.label},d.value))})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"DSN (Connection String)"}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:_(l.driver),value:l.dsn,onInput:d=>n({...l,dsn:d.target.value})})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:["Schema ",e("span",{class:"text-text-muted font-normal",children:"(optional)"})]}),e("input",{type:"text",class:"input w-full font-mono text-sm",placeholder:"public",value:l.schema,onInput:d=>n({...l,schema:d.target.value})})]})]}),e("div",{class:"flex items-center justify-between mt-6 pt-4 border-t border-border-subtle",children:[e("button",{onClick:()=>{i(!0),r("done")},class:"btn-ghost text-sm",children:"Skip for now"}),e("button",{onClick:x,disabled:p||!l.name||!l.dsn,class:"btn-primary",children:p?"Connecting...":"Connect & Finish"})]})]}),t==="done"&&e("div",{class:"text-center py-8",children:[e("div",{class:"w-16 h-16 rounded-full bg-success/10 flex items-center justify-center mx-auto mb-6",children:e("svg",{class:"w-8 h-8 text-success",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})})}),e("h2",{class:"text-2xl font-bold text-text-primary mb-3",children:"You're All Set!"}),e("p",{class:"text-text-secondary mb-8 max-w-sm mx-auto",children:m?"Your Faucet instance is ready. Add a database connection to start building APIs.":"Your database is connected and REST APIs are live. Explore your schema or test the API."}),e("div",{class:"flex items-center justify-center gap-3",children:[e("button",{onClick:()=>Q("/",!0),class:"btn-primary text-base px-6 py-2.5",children:"Go to Dashboard"}),!m&&e("a",{href:"/schema",class:"btn-secondary text-base px-6 py-2.5",children:"Explore Schema"})]})]})]})]})})}function Xt({onLogin:t}){const[r,s]=v(""),[a,l]=v(""),[n,o]=v(null),[u,p]=v(!1);async function h(m){m.preventDefault(),p(!0),o(null);try{const i=await T("/api/v1/system/admin/session",{method:"POST",body:{email:r,password:a}});i.session_token&&localStorage.setItem("faucet_session",i.session_token),t()}catch(i){o(i instanceof Error?i.message:"Login failed")}finally{p(!1)}}return e("div",{class:"min-h-screen flex items-center justify-center bg-surface p-4",children:e("div",{class:"w-full max-w-sm",children:[e("div",{class:"text-center mb-8",children:[e("div",{class:"w-14 h-14 rounded-2xl bg-gradient-to-br from-brand to-cyan-accent flex items-center justify-center mx-auto mb-4",children:e("svg",{class:"w-7 h-7 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})}),e("h1",{class:"text-xl font-bold text-text-primary",children:"Faucet Admin"}),e("p",{class:"text-sm text-text-muted mt-1",children:"Sign in to manage your instance"})]}),e("form",{onSubmit:h,class:"card space-y-4",children:[n&&e("div",{class:"p-3 rounded-lg bg-error/10 border border-error/20 text-sm text-error",children:n}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Email"}),e("input",{type:"email",class:"input w-full",placeholder:"admin@example.com",value:r,autoFocus:!0,onInput:m=>s(m.target.value)})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-text-secondary mb-1.5",children:"Password"}),e("input",{type:"password",class:"input w-full",placeholder:"Enter password",value:a,onInput:m=>l(m.target.value)})]}),e("button",{type:"submit",disabled:u||!r||!a,class:"btn-primary w-full py-2.5",children:u?e("span",{class:"flex items-center justify-center gap-2",children:[e("svg",{class:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Signing in..."]}):"Sign In"})]})]})})}function Yt(){const[t,r]=v(!1),[s,a]=v(window.location.pathname),[l,n]=v("loading");H(()=>{o()},[]);async function o(){const m=localStorage.getItem("faucet_session");if(!m){try{const i=await fetch("/api/v1/system/admin/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"",password:""})});if(i.status===404||i.status===503)n("login");else{const f=await i.json().catch(()=>({}));f.error?.message?.toLowerCase().includes("no admin")||f.error?.message?.toLowerCase().includes("not found")?(n("setup"),Q("/setup",!0)):n("login")}}catch{n("login")}return}try{const i=await fetch("/api/v1/system/service",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});i.ok?n("authenticated"):i.status===401?(localStorage.removeItem("faucet_session"),n("login")):n("authenticated")}catch{n("authenticated")}}function u(){n("authenticated"),Q("/",!0)}function p(){localStorage.removeItem("faucet_session"),n("login"),Q("/",!0)}const h=m=>{a(m.url),r(!1)};return l==="loading"?e("div",{class:"min-h-screen flex items-center justify-center bg-surface",children:e("div",{class:"flex items-center gap-3",children:[e("svg",{class:"w-5 h-5 animate-spin text-brand",viewBox:"0 0 24 24",fill:"none",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e("span",{class:"text-text-muted text-sm",children:"Loading..."})]})}):l==="setup"?e("div",{class:"min-h-screen bg-surface",children:e(Fe,{})}):l==="login"?e(Xt,{onLogin:u}):e("div",{class:"flex h-screen overflow-hidden bg-surface",children:[e(Ht,{currentPath:s,isOpen:t,onClose:()=>r(!1)}),e("div",{class:"flex flex-col flex-1 min-w-0",children:[e(Dt,{onMenuClick:()=>r(!t),onLogout:p}),e("main",{class:"flex-1 overflow-y-auto p-6",children:e("div",{class:"max-w-7xl mx-auto animate-fade-in",children:e(at,{onChange:h,children:[e(B,{path:"/",component:Bt}),e(B,{path:"/services",component:Nt}),e(B,{path:"/schema",component:Ut}),e(B,{path:"/api-explorer",component:qt}),e(B,{path:"/roles",component:Wt}),e(B,{path:"/api-keys",component:Qt}),e(B,{path:"/settings",component:Gt}),e(B,{path:"/setup",component:Fe})]})})})]}),t&&e("div",{class:"fixed inset-0 bg-black/60 z-30 lg:hidden",onClick:()=>r(!1)})]})}const Ne=document.getElementById("app");Ne&&ft(e(Yt,{}),Ne);
